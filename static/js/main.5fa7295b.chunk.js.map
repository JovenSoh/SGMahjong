{"version":3,"sources":["components/Mahjong.js","components/Tile.js","components/Tileset.js","components/NameCard.js","components/OtherPlayer.js","components/Discards.js","components/Unselect.js","components/Actions.js","components/Board.js","components/Summary.js","components/ScoreInfo.js","components/Information.js","components/Username.js","components/Table.js","videos/mahjongVid.webm","components/Menu.js","App.js","index.js"],"names":["compare","a","b","suit","value","getChow","chowSet","result","map","Map","item","has","set","push","id","picture","checkHand","hand","winner","eye","console","log","length","forEach","tile","filter","e","sequential","same","concat","checkMahjong","lookupPair","reduce","pairs","十三幺","十三幺Unique","v","JSON","stringify","values","win","winningHand","sequentials","checkGame","tiles","revealed","bonusTiles","tableWind","yourWind","lastDiscard","drawn","summary","summary_combination","sort","mahjong","combination","name","points","game","chowSets","pongSets","special","findIndex","winningSet","indexOf","suits","Set","honors","includes","one9","animals","animalPoints","winds","windPoints","dragon","dragonPoints","Math","floor","tableWindPoints","yourWindPoints","add","accumulator","combinationPoints","totalPoints","selfDrawn","Tile","color","hoveredTile","src","fallbackSrc","h","borderRadius","borderWidth","borderColor","borderStyle","boxShadow","opacity","Tileset","direction","spacing","NameCard","playerID","username","currentPlayer","wind","textColor","overflow","bgColor","px","p","w","OtherPlayer","gameState","gameStateIndex","playerIndex","hiddenListV","Array","apply","handLength","bg","revealedTiles","hiddenList","Discards","discards","setHoveredTile","handleHover","tileList","motion","div","onHoverStart","onHoverEnd","whileHover","scale","Unselect","props","ref","handleSelectTile","wrapperRef","useRef","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","children","Actions","sequentialTiles","pongTiles","kongTiles","handleChow","handlePong","handleKong","handleGame","chowAction","_hover","onClick","pongAction","kongAction","type","slice","variant","gameAction","Board","clientID","newTile","currentTurn","selectedTile","handleDiscard","useState","tileVariants","selected","y","unselected","idx","variants","animate","handleClickTile","m","mt","count","row","position","zIndex","mb","Summary","roundEnd","handleNewGame","draw","isOpen","onOpen","onClose","newGame","setNewGame","setTimeout","nameDict","allPong","臭平和","平和","清一色","混一色","oneNine","halfOneNine","七对子","summary_filtered","Object","keys","key","table","isNumeric","isDisabled","size","ScoreInfo","score","info","pictures","useDisclosure","onToggle","in","split","sentence","align","justifyContent","fontSize","Information","useClipboard","window","location","href","hasCopied","onCopy","player","flowerIndex","scoreTable","pettyTable","find","mr","isFitted","isAttached","disabled","textAlign","isReadOnly","Username","sendMessage","defaultIsOpen","setUsername","submitUsername","closeOnOverlayClick","onKeyPress","onChange","placeholder","my","Table","sequentialTiles_top","sequentialTiles_mid","sequentialTiles_bot","gameId","useParams","socketUrl","setMessageHistory","setOnlineUsers","setClientID","winnerID","setWinnerID","setCurrentPlayer","previousPlayer","setPreviousPlayer","setTiles","setNewTile","setBonusTiles","setRevealedTiles","setYourWind","setTableWind","setDiscards","setLastDiscard","setSequentialTiles","setPongTiles","setKongTiles","setGame","setSummary","setCurrentTurn","isOpenSummary","onOpenSummary","onCloseSummary","setDraw","setRoundEnd","minimumPoints","delay","setGameState","setSelectedTile","lookup","useWebSocket","lastMessage","readyState","connectionStatus","ReadyState","CONNECTING","OPEN","CLOSING","CLOSED","UNINSTANTIATED","data","prev","userList","replace","gameState_temp","parse","clientID_temp","tiles_temp","game_temp","summary_temp","four_concealed","kongSets","one_concealed","checkKong","bonusTiles_temp","bonuses","bonus","discards_temp","at","totalpoints","sameTiles","sequentialTiles_temp","checkValidMoves","revealedTiles_temp","newTiles","i","currentPlayer_temp","substring","pongSet","kongSet","Menu","navigate","useNavigate","gameCode","setGameCode","width","setWidth","autoPlay","loop","muted","bgVid","s4","random","toString","gameID","animateOpacity","focusBorderColor","handleCodeChange","alert","_focus","outline","App","forceRefresh","basename","process","path","exact","element","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.5fa7295b.chunk.js","sourcesContent":["//sort hand\r\nexport function compare( a, b ) {\r\n    if ( a.suit < b.suit ){\r\n      return -1;\r\n    }\r\n    if ( a.suit > b.suit ){\r\n      return 1;\r\n    }\r\n    if ( a.suit === b.suit ){\r\n      if ( a.value < b.value ){\r\n        return -1;\r\n      }\r\n      if ( a.value > b.value ){\r\n        return 1;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n\r\nexport function getChow(chowSet) {\r\n  const result = [];\r\n  const map = new Map();\r\n  for (const item of chowSet) {\r\n      if(!map.has(item.value)){\r\n          map.set(item.value, true);    // set any value to Map\r\n          result.push({\r\n              suit: item.suit,\r\n              value: item.value,\r\n              id: item.id,\r\n              picture: item.picture\r\n          });\r\n      }\r\n  }\r\n  return result\r\n}\r\n\r\nexport function checkHand(hand, winner, eye){\r\n  console.log(\"Recursion\",hand, winner, eye)\r\n  //4 sets and an eye, so if there are more sets, it's wrong\r\n  if (winner.length > 5){\r\n    return [false,winner,eye]\r\n  }\r\n  //remove tiles marked as winning from hand\r\n  if (winner.length > 0){\r\n    winner.forEach((set) => {\r\n      set.forEach((tile) => {\r\n        hand = hand.filter(e => !((e.picture === tile.picture) && (e.id === tile.id)))\r\n      })\r\n    })\r\n  }\r\n  //base case, minimum of 2 tiles to form a set\r\n  if (hand.length > 0){\r\n    //check for chow\r\n    let sequential = getChow(hand.filter(e => (e.suit === hand[0].suit) && (e.value === hand[0].value || e.value === hand[0].value+1 || e.value === hand[0].value+2)))\r\n    //check for same tiles\r\n    let same = hand.filter(e => e.picture === hand[0].picture)\r\n\r\n    if (sequential.length == 3) {\r\n      console.log(\"Sequential set\", sequential)\r\n      if (checkHand(hand,winner.concat([sequential]),eye)[0]){\r\n        return checkHand(hand,winner.concat([sequential]),eye)\r\n      }\r\n    }\r\n    if (same.length == 4){\r\n      console.log(\"Kong set\", same)\r\n      if (checkHand(hand,winner.concat([same]),eye)[0]){\r\n        return checkHand(hand,winner.concat([same]),eye)\r\n      }\r\n    }\r\n    if (same.length == 3){\r\n      console.log(\"Pong set\", same)\r\n      if (checkHand(hand,winner.concat([same]), eye)[0]){\r\n        return checkHand(hand,winner.concat([same]),eye)\r\n      }\r\n    }\r\n    if (same.length == 2 && !eye){\r\n      console.log(\"Eye\", same)\r\n      if (checkHand(hand,winner.concat([same]), true)[0]){\r\n        return checkHand(hand,winner.concat([same]),true)\r\n      }\r\n    }\r\n    //if the current tile doesn't form a set, return false and stop this branch\r\n    return [false, winner, eye]\r\n  }else if (hand.length === 0){ //if there are no tiles left\r\n    return [true, winner, eye]\r\n  }\r\n  \r\n}\r\n\r\nexport function checkMahjong(hand) {\r\n  //check for special cases\r\n  //1. 7 pair\r\n  const lookupPair = hand.reduce((a, e) => {\r\n    a[`${e.suit} ${e.value}`] = ++a[`${e.suit} ${e.value}`] || 0;\r\n    return a;\r\n  }, {});\r\n\r\n  let pairs = hand.filter(e => lookupPair[`${e.suit} ${e.value}`] === 1)\r\n\r\n  console.log(\"Pairs: \",pairs)\r\n  if (pairs.length === 14){\r\n    return [true, [], [], [], \"七对子\"]\r\n  }\r\n\r\n  //2. 13 wonders\r\n  let 十三幺 = hand.filter(e => (e.suit === \"bamboo\" && e.value === 1) || (e.suit === \"bamboo\" && e.value === 9) || (e.suit === \"circles\" && e.value === 1) || (e.suit === \"circles\" && e.value === 9) || (e.suit === \"numbers\" && e.value === 1) || (e.suit === \"numbers\" && e.value === 9) || (e.suit === \"~north\") || (e.suit === \"~south\") || (e.suit === \"~east\") || (e.suit === \"~west\") || (e.suit === \"~red\") || (e.suit === \"~green\") || (e.suit === \"~white\") )\r\n  console.log(\"十三幺: \",十三幺)\r\n  let 十三幺Unique =  [...new Map(十三幺.map(v => [JSON.stringify([v.suit,v.value]), v])).values()]\r\n  if (十三幺.length === 14 && 十三幺Unique.length === 13){\r\n    return [true,[],[],[],\"十三幺\"]\r\n  }\r\n\r\n  let [win, winningHand] = checkHand(hand,[],false)\r\n  if (win){\r\n    console.log(\"Winning hand!\", winningHand)\r\n    let eye\r\n    let same = []\r\n    let sequentials = []\r\n    winningHand.forEach((set) => {\r\n      let set_temp = set.filter((tile) => tile.picture = set[0].picture)\r\n      //handle same tiles\r\n      if (set_temp.length > 1){\r\n        if (set.length == 2){\r\n          eye = set\r\n        }else{\r\n          same.concat(set)\r\n        }\r\n      }else{\r\n        sequentials.concat(set)\r\n      }\r\n    })\r\n    return [true,sequentials,same,eye,null]\r\n  }\r\n\r\n  return [false,[],[],[],\"\"]\r\n\r\n}\r\n\r\nexport function checkGame(tiles, revealed, bonusTiles,tableWind,yourWind, lastDiscard,drawn) {\r\n  let hand = tiles.concat(revealed.concat(lastDiscard).concat(drawn)).sort(compare)\r\n  let mahjong = tiles.concat(revealed.concat(lastDiscard).concat(drawn)).sort(compare)\r\n  let pointsLimit = 5\r\n  let summary, summary_combination\r\n\r\n  //Mahjong hands\r\n  let combination = [\r\n     {name: \"allPong\",\r\n     value: false,\r\n     points: 2},\r\n     {name: \"臭平和\",\r\n     value: false,\r\n     points: 1},\r\n     {name: \"平和\",\r\n     value: false,\r\n     points: 4},\r\n     {name: \"清一色\",\r\n     value: false,\r\n     points: 4},\r\n     {name: \"混一色\",\r\n     value: false,\r\n     points: 2},\r\n     {name: \"oneNine\",\r\n     value: false,\r\n     points: 5},\r\n     {name: \"halfOneNine\",\r\n     value: false,\r\n     points: 1},\r\n     {name: \"七对子\",\r\n     value: false,\r\n     points: 3},\r\n     {name: \"十三幺\",\r\n     value: false,\r\n     points: 5},\r\n  ]\r\n  \r\n  let [game, chowSets, pongSets, eye, special] = checkMahjong(hand)\r\n\r\n  //check strength of hand\r\n  if (special){\r\n    if (special === \"七对子\"){\r\n      combination[combination.findIndex(e => e.name === \"七对子\")].value = true\r\n    } else if (special === \"十三幺\"){\r\n      combination[combination.findIndex(e => e.name === \"十三幺\")].value = true\r\n    }\r\n  }else if (game){\r\n    //all pong game\r\n    if (pongSets.length >= 12){\r\n      combination[combination.findIndex(e => e.name === \"allPong\")].value = true\r\n    }\r\n    //check allChow\r\n    // 1. The EYE cannot be a Dragon Tile or the Prevailing Wind or the Players Wind for that game\r\n    if (eye[0].suit != '~red' && eye[0].suit != '~green' && eye[0].suit !='~white' && eye[0].suit != tableWind && eye[0].suit != yourWind){\r\n      // 2. The tiles must be made up of one EYE and four CHOWs.\r\n      if (chowSets.length === 4){\r\n        // 3. If the player wins the game on a discarded tile, there must be more than one unique tile that could have caused the player to win the game\r\n        if (lastDiscard.length !== 0){\r\n          let winningSet = chowSets.filter(e => e.indexOf(lastDiscard) > 0 )\r\n          if (winningSet[0] === lastDiscard || winningSet[2] === lastDiscard) {\r\n            //check if there are bonus tiles\r\n            if (bonusTiles.length === 0){\r\n              combination[combination.findIndex(e => e.name === \"平和\")].value = true\r\n            }else{\r\n              combination[combination.findIndex(e => e.name === \"臭平和\")].value = true\r\n            }\r\n          }\r\n        //3a.if it's self-drawn\r\n        }else{\r\n          if (bonusTiles.length === 0){\r\n            combination[combination.findIndex(e => e.name === \"平和\")].value = true\r\n          }else{\r\n            combination[combination.findIndex(e => e.name === \"臭平和\")].value = true\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    //check for color game\r\n    let suits = [...new Set(mahjong.map(e => e.suit))]\r\n    let honors = ['~east','~south','~west','~north','~red','~green','~white']\r\n    console.log(\"Suits: \", suits)\r\n    console.log(\"Filtered suits:\", suits.filter(e => !honors.includes(e)))\r\n\r\n    if (suits.length === 1){\r\n      combination[combination.findIndex(e => e.name === \"清一色\")].value = true\r\n    }else if (suits.filter(e => !honors.includes(e)).length === 1){\r\n      combination[combination.findIndex(e => e.name === \"混一色\")].value = true\r\n    }\r\n    //check for ones and nines\r\n    let one9 = [...new Set(mahjong.map(e => e.value))]\r\n    console.log(\"oneNine: \", one9.filter(e => e !== 9 && e !== 1 && e !== null))\r\n\r\n    if (one9.filter(e => e !== 9 && e !== 1).length === 0){\r\n      combination[combination.findIndex(e => e.name === \"oneNine\")].value = true\r\n    }else if (one9.filter(e => e !== 9 && e !== 1 && e !== null).length === 0){\r\n      combination[combination.findIndex(e => e.name === \"halfOneNine\")].value = true\r\n    }\r\n\r\n    //count points\r\n    let points = 0\r\n    //count bonus tiles\r\n    //animal tiles\r\n    let animals = ['cat','mouse','rooster','centipede']\r\n    let animalPoints = bonusTiles.filter(e => animals.includes(e.suit)).length\r\n    console.log(\"Animals: \", animalPoints)\r\n    //wind tiles\r\n    let winds = [\"~east\",\"~south\",\"~west\",\"~north\"]\r\n    let windPoints = bonusTiles.filter(e => !animals.includes(e.suit) && winds[e.value-1] === yourWind ).length\r\n    console.log(\"Winds: \", windPoints)\r\n    //find honors tiles in pong sets\r\n    let dragon = [\"~red\",\"~green\",\"~white\"]\r\n    let dragonPoints = Math.floor(pongSets.filter(e => dragon.includes(e.suit)).length/3)\r\n    console.log(\"Dragon Tiles: \",dragonPoints)\r\n    let tableWindPoints = Math.floor(pongSets.filter(e => e.suit === tableWind).length/3)\r\n    console.log(\"Table Wind: \",tableWindPoints)\r\n    let yourWindPoints = Math.floor(pongSets.filter(e => e.suit === yourWind).length/3)\r\n    console.log(\"Your Wind: \",yourWindPoints)\r\n\r\n    function add(accumulator, a) {\r\n      return accumulator + a\r\n    }\r\n    //find the sum of all points in valid mahjong combinations\r\n    let combinationPoints = combination.filter(e => e.value === true).map(e => e.points).reduce(add,0)\r\n    console.log(\"Combi points: \", combinationPoints)\r\n\r\n    points = (dragonPoints+tableWindPoints+yourWindPoints + combinationPoints + animalPoints + windPoints > pointsLimit) ? pointsLimit : dragonPoints+tableWindPoints+yourWindPoints + combinationPoints + animalPoints + windPoints\r\n    console.log(\"Total points: \", points)\r\n\r\n    summary_combination = combination.filter(e => e.value === true).map(\r\n      function(e){\r\n        return {\r\n          [e.name] : e.points\r\n        }\r\n      }\r\n    )\r\n\r\n    summary = {\r\n      ...summary_combination[0],\r\n      animalPoints: animalPoints,\r\n      windPoints: windPoints,\r\n      dragonPoints: dragonPoints,\r\n      tableWindPoints: tableWindPoints,\r\n      yourWindPoints: yourWindPoints,\r\n      totalPoints: points,\r\n      selfDrawn: lastDiscard.length === 0? true : false\r\n    } \r\n\r\n\r\n }\r\n\r\n  return [game, summary]\r\n}\r\n","import {Image} from \"@chakra-ui/react\"\r\n\r\nexport default function Tile({picture, color, hoveredTile}){\r\n    if (!color){\r\n        let color = \"#343434\"\r\n    }\r\n\r\n    //if there is a hovered tile\r\n    if (hoveredTile){\r\n        //if hovered tile has the same picture\r\n        if (picture === hoveredTile.picture){\r\n            return(\r\n                <Image src={`https://raw.githubusercontent.com/JovenSoh/sgmahjong/gh-pages/images/${picture}.jpg`} fallbackSrc={\"../images/\" + picture + \".jpg\"}  h=\"6vh\" borderRadius=\"5px\" borderWidth=\"1px\" borderColor=\"#343434\" borderStyle=\"solid\" boxShadow={`3px 4px ${color}`} />\r\n            )\r\n        }else{\r\n            return(\r\n                <Image src={`https://raw.githubusercontent.com/JovenSoh/sgmahjong/gh-pages/images/${picture}.jpg`} fallbackSrc={\"../images/\" + picture + \".jpg\"} opacity=\"30%\"  h=\"6vh\" borderRadius=\"5px\" borderWidth=\"1px\" borderColor=\"#343434\" borderStyle=\"solid\" boxShadow={`300px 400px 100px ${color}`} />\r\n            )            \r\n        }\r\n    }else{\r\n        return (\r\n            <Image src={`https://raw.githubusercontent.com/JovenSoh/sgmahjong/gh-pages/images/${picture}.jpg`} fallbackSrc={\"../images/\" + picture + \".jpg\"}  h=\"6vh\" borderRadius=\"5px\" borderWidth=\"1px\" borderColor=\"#343434\" borderStyle=\"solid\" boxShadow={`3px 4px ${color}`} />\r\n        )\r\n    }\r\n\r\n}","import {HStack, VStack, Box, Image} from '@chakra-ui/react'\r\nimport Tile from './Tile'\r\n\r\nexport default function Tileset({tiles, direction, hoveredTile}) {\r\n  if (direction === \"vertical\"){\r\n    let spacing = 0\r\n    if (tiles.length > 10){\r\n      spacing = 0.14*tiles.length\r\n    }\r\n    return (\r\n      <VStack spacing={`-${spacing}vh`}>\r\n      {tiles.map((tile) => {\r\n        return (\r\n          <Tile picture={tile.picture} hoveredTile={hoveredTile} />\r\n          )\r\n      })}\r\n      </VStack>\r\n    )\r\n  }else{\r\n    return (\r\n      <HStack spacing='1px'>\r\n      {tiles.map((tile) => {\r\n        return (\r\n          <Tile picture={tile.picture} hoveredTile={hoveredTile} />\r\n          )\r\n      })}\r\n      </HStack>\r\n    )\r\n  }\r\n}\r\n","import {Center, Flex, Text, Image} from \"@chakra-ui/react\"\r\n\r\n\r\nexport default function NameCard({playerID, username, currentPlayer, wind}){\r\n    \r\n    return(\r\n            <Center >\r\n                <Flex h='3vh' textColor='#fafafa' overflow=\"hidden\" bgColor={(currentPlayer===playerID) ? \"#a36453\":\"#55342b\"} px='5px' borderRadius=\"10px\" borderWidth=\"1px\" borderColor='black' borderStyle='solid'>\r\n                    {username}\r\n                    <Image p='2px' borderRadius=\"5px\" src={ wind ? `https://raw.githubusercontent.com/JovenSoh/sgmahjong/gh-pages/images/${wind}.jpg` : null} fallbackSrc={wind ? `../images/${wind}.jpg` : null} w='2.3vh' h='2.8vh' />\r\n                </Flex>\r\n            </Center>\r\n    )\r\n}","import {Box, HStack, VStack, Center} from \"@chakra-ui/react\"\r\nimport Tileset from \"./Tileset\"\r\nimport NameCard from './NameCard'\r\n\r\nexport default function OtherPlayer({gameState, gameStateIndex, currentPlayer, playerIndex, hoveredTile}){\r\n\r\n    const hiddenList = (gameStateIndex) => {\r\n        let hiddenTemp = Array.apply(null, Array(gameState[gameStateIndex].handLength)).map(function () {})\r\n        const hidden = hiddenTemp.map(() => {\r\n            return(\r\n                <Box h='2vh' w='3.5vh'  borderRadius=\"5px\" borderWidth='1px' borderColor='black' bg='white' borderStyle='solid' />\r\n            )\r\n        })\r\n        return(hidden)\r\n    }\r\n\r\n    const hiddenListV = (gameStateIndex) => {\r\n        let hiddenTemp = Array.apply(null, Array(gameState[gameStateIndex].handLength)).map(function () {})\r\n        const hidden = hiddenTemp.map(() => {\r\n            return(\r\n                <Box h='3.5vh' w='2vh' borderRadius=\"5px\" borderWidth='1px' borderColor='black' bg='white' borderStyle='solid' />\r\n            )\r\n        })\r\n        return(hidden)\r\n    }\r\n\r\n    if (playerIndex === 1){\r\n        return(\r\n            <Box>\r\n                {gameState[(gameStateIndex+1)%4] &&\r\n                <VStack spacing='10px'>\r\n                    <NameCard playerID={gameState[(gameStateIndex+1)%4].playerID} username={gameState[(gameStateIndex+1)%4].username} currentPlayer={currentPlayer} wind={gameState[(gameStateIndex+1)%4].wind} />\r\n                    <HStack>\r\n                        <Box w='60px'>\r\n                            <Tileset direction=\"vertical\" tiles={gameState[(gameStateIndex+1)%4].revealedTiles.concat(gameState[(gameStateIndex+1)%4].bonusTiles)} hoveredTile={hoveredTile}/>\r\n                        </Box>\r\n                        <Box>\r\n                            <VStack spacing='2px'>\r\n                                {hiddenListV((gameStateIndex+1)%4)}\r\n                            </VStack>\r\n                        </Box>\r\n                    </HStack>\r\n                </VStack>\r\n                }\r\n            </Box>\r\n        )\r\n    }\r\n    else if (playerIndex === 2){\r\n        return(\r\n            <Box>\r\n                {gameState[(gameStateIndex+2)%4] &&\r\n                <>\r\n                    <NameCard playerID={gameState[(gameStateIndex+2)%4].playerID} username={gameState[(gameStateIndex+2)%4].username} currentPlayer={currentPlayer} wind={gameState[(gameStateIndex+2)%4].wind} />\r\n                    <Box>\r\n                        <Center>\r\n                            <HStack spacing='2px'>\r\n                                {hiddenList((gameStateIndex+2)%4)}\r\n                            </HStack>\r\n                        </Center>\r\n                        <Center>\r\n                            <Tileset tiles={gameState[(gameStateIndex+2)%4].revealedTiles.concat(gameState[(gameStateIndex+2)%4].bonusTiles)} hoveredTile={hoveredTile}/>\r\n                        </Center>\r\n                    </Box>\r\n                </>\r\n                }\r\n            </Box>\r\n        )\r\n    }else if (playerIndex === 3){\r\n        return(\r\n            <Box>\r\n                {gameState[(gameStateIndex+3)%4] &&\r\n                    <VStack spacing='10px'>\r\n                        <NameCard playerID={gameState[(gameStateIndex+3)%4].playerID} username={gameState[(gameStateIndex+3)%4].username} currentPlayer={currentPlayer} wind={gameState[(gameStateIndex+3)%4].wind} />\r\n                        <HStack>\r\n                            <Box>\r\n                                <VStack spacing='2px'>\r\n                                    {hiddenListV((gameStateIndex+3)%4)}\r\n                                </VStack>\r\n                            </Box>\r\n                            <Box w='60px'>\r\n                                <Tileset direction=\"vertical\" tiles={gameState[(gameStateIndex+3)%4].revealedTiles.concat(gameState[(gameStateIndex+3)%4].bonusTiles)} hoveredTile={hoveredTile}/>\r\n                            </Box>\r\n                        </HStack>\r\n                    </VStack>\r\n                }\r\n            </Box>\r\n        )\r\n    }\r\n}","import { Wrap } from '@chakra-ui/react'\r\nimport { motion } from 'framer-motion'\r\nimport Tile from './Tile'\r\n\r\nexport default function Discards({discards, hoveredTile, setHoveredTile, handleHover}){\r\n\r\n    const tileList = discards.map((tile) =>{\r\n        return (\r\n            <motion.div onHoverStart={() => handleHover(tile)} onHoverEnd={() => setHoveredTile(null)} whileHover={{scale:1.1}}  >\r\n                <Tile picture={tile.picture} hoveredTile={hoveredTile} />\r\n            </motion.div>\r\n        )\r\n    })\r\n\r\n    return(\r\n        <Wrap spacing='5px' h='50vh' w='50vh' >\r\n                {tileList}\r\n        </Wrap>\r\n    )\r\n}","import React, { useRef, useEffect } from \"react\";\r\n\r\n/**\r\n * Hook that alerts clicks outside of the passed ref\r\n */\r\nfunction useOutsideAlerter(ref,handleSelectTile) {\r\n    useEffect(() => {\r\n        /**\r\n         * Alert if clicked on outside of element\r\n         */\r\n        function handleClickOutside(event) {\r\n            if (ref.current && !ref.current.contains(event.target)) {\r\n                handleSelectTile(null)\r\n            }\r\n        }\r\n\r\n        // Bind the event listener\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => {\r\n            // Unbind the event listener on clean up\r\n            document.removeEventListener(\"mousedown\", handleClickOutside);\r\n        };\r\n    }, [ref]);\r\n}\r\n\r\n/**\r\n * Component that alerts if you click outside of it\r\n */\r\nexport default function Unselect(props) {\r\n    const wrapperRef = useRef(null);\r\n    useOutsideAlerter(wrapperRef,props.handleSelectTile);\r\n    \r\n    return <div ref={wrapperRef}>{props.children}</div>;\r\n}","import {Box, HStack, Button, Spacer} from '@chakra-ui/react'\r\nimport { compare } from './Mahjong'\r\nimport Tileset from './Tileset'\r\n\r\nexport default function Actions({lastDiscard, sequentialTiles, pongTiles, kongTiles, game, handleChow, handlePong, handleKong, handleGame}){\r\n    \r\n    const chowAction = sequentialTiles.map((e) => {\r\n        return(\r\n            <Box p=\"5px\" bg='#55342b' _hover={{bg:\"#a36453\"}} borderRadius=\"5px\" borderWidth=\"1px\" borderColor=\"#343434\" borderStyle=\"solid\" boxShadow={`3px 4px #000000`}\r\n                onClick={() => {\r\n                console.log(\"Selected chow set\", e)\r\n                handleChow(e.concat(lastDiscard).sort(compare))\r\n                }}>\r\n                <Tileset tiles={e.concat(lastDiscard).sort(compare)} />\r\n            </Box>\r\n        )\r\n    })\r\n\r\n    const pongAction = pongTiles.map((e) => {\r\n        return(\r\n            <Box p=\"5px\" bg='#55342b' _hover={{bg:\"#a36453\"}} borderRadius=\"5px\" borderWidth=\"1px\" borderColor=\"#343434\" borderStyle=\"solid\" boxShadow={`3px 4px #000000`}\r\n                onClick={() => {\r\n                console.log(\"Selected pong set\", e)\r\n                handlePong(e.sort(compare))\r\n                }}>\r\n                <Tileset tiles={e.sort(compare)} />\r\n            </Box>\r\n        )\r\n    })\r\n\r\n    const kongAction = kongTiles.map((e) => {\r\n        //if it's a full kongset with type\r\n            if (e.length > 1){\r\n                let type = e[4]\r\n                e = e.slice(0,4)\r\n                return(\r\n                    <Box p=\"5px\" bg='#55342b' _hover={{bg:\"#a36453\"}} borderRadius=\"5px\" borderWidth=\"1px\" borderColor=\"#343434\" borderStyle=\"solid\" boxShadow={`3px 4px #000000`}\r\n                    onClick={() => {\r\n                    console.log(\"Selected kong set\", e)\r\n                    handleKong(e.sort(compare), type)\r\n                    }}>\r\n                        <Tileset tiles={e.sort(compare)} />\r\n                    </Box>    \r\n                )\r\n            }\r\n    })\r\n\r\n    const gameAction = () => {\r\n        return(\r\n            <Button p=\"5px\" variant='ghost' _hover={{bg:\"rgba(255,255,255,0.2)\"}} bg='rgba(255,255,255,0.1)' borderRadius=\"10px\" p='5px' onClick={handleGame} display={game ? \"block\" : \"none\"} >\r\n                Game\r\n            </Button>\r\n        )\r\n    }\r\n\r\n    return(\r\n        <HStack h='100px'>\r\n            {(sequentialTiles.length > 0) ? chowAction : null}\r\n            {(pongTiles.length > 0) ? pongAction : null}\r\n            {(kongTiles.length > 0) ? kongAction : null}\r\n            {game ? gameAction() : null}\r\n        </HStack>\r\n    )\r\n}","import {Box, HStack, Center, Spacer, Button, VStack, Image} from '@chakra-ui/react'\r\nimport { useState } from 'react'\r\nimport Tileset from './Tileset'\r\nimport OtherPlayer from './OtherPlayer'\r\nimport Discards from './Discards'\r\nimport Unselect from './Unselect'\r\nimport Tile from './Tile'\r\nimport { motion } from \"framer-motion\"\r\nimport Actions from './Actions'\r\n\r\nexport default function Board({clientID, tiles, newTile, handleSelectTile,currentTurn, currentPlayer, gameState, discards, selectedTile, handleDiscard, lastDiscard, pongTiles, handlePong, sequentialTiles, handleChow, kongTiles, handleKong, game, handleGame}){\r\n    const [hoveredTile, setHoveredTile] = useState()\r\n    let gameStateIndex = gameState.findIndex(e => e.playerID === clientID)\r\n    \r\n    const tileVariants = {\r\n        selected: {y:-15},\r\n        unselected: {y:0}\r\n    }\r\n\r\n    const handleClickTile = (tile) => {\r\n        if (selectedTile === tile && currentTurn){\r\n            handleDiscard()\r\n        }else{\r\n            handleSelectTile(tile)\r\n        }\r\n    }\r\n\r\n    const handleHover = (tile) => {\r\n        setHoveredTile(tile)\r\n    }\r\n\r\n    //Render tiles\r\n    const tileList = tiles.map((tile, idx) =>{\r\n        var color = \"#343434\"\r\n        if (tile === newTile && currentTurn){\r\n            color = \"#ff4a4a\"\r\n        }\r\n\r\n        return (\r\n                <motion.div onHoverStart={() => handleHover(tile)} onHoverEnd={() => setHoveredTile(null)} whileHover={{scale:1.1}} variants={tileVariants} animate={(selectedTile === tile) ? 'selected':'unselected'} >\r\n                    <Box key={idx} value = {tile} onClick={() => handleClickTile(tile)} >\r\n                        <Tile picture={tile.picture} color={color} />\r\n                    </Box>\r\n                </motion.div>\r\n        )\r\n\r\n    })\r\n\r\n\r\n    return(\r\n        <>\r\n        <VStack h='95vh' w='95vh' m='auto' mt='2vh' bgColor=\"#006442\" borderWidth='5px' borderColor='#55342b'  borderStyle='solid'>\r\n            { gameState[(gameStateIndex+2)%4]? <OtherPlayer gameState={gameState} gameStateIndex={gameStateIndex} currentPlayer={currentPlayer} playerIndex={2} hoveredTile={hoveredTile}/> : <Spacer /> }\r\n            <Spacer />\r\n            <HStack w='100%'>\r\n                { gameState[(gameStateIndex+3)%4]? <OtherPlayer gameState={gameState} gameStateIndex={gameStateIndex} currentPlayer={currentPlayer} playerIndex={3} hoveredTile={hoveredTile}/> : <Spacer /> }\r\n                <Spacer />\r\n                <Discards discards={discards} hoveredTile={hoveredTile} setHoveredTile={setHoveredTile} handleHover={handleHover} />\r\n                <Spacer />\r\n                { gameState[(gameStateIndex+1)%4]? <OtherPlayer gameState={gameState} gameStateIndex={gameStateIndex} currentPlayer={currentPlayer} playerIndex={1} hoveredTile={hoveredTile}/> : <Spacer /> }\r\n            </HStack>\r\n            <Spacer />\r\n            {(sequentialTiles.length === 0 && pongTiles.length === 0 && kongTiles.reduce((count, row) => count + row.length, 0) <= 1 && !game) ? <Box h='100px' /> : <Actions lastDiscard={lastDiscard} sequentialTiles={sequentialTiles} pongTiles={pongTiles} kongTiles={kongTiles} game={game} handleChow={handleChow} handlePong={handlePong} handleKong={handleKong} handleGame={handleGame} /> }\r\n            { gameState[gameStateIndex] &&\r\n            <Box position='relative' zIndex={2}>\r\n                <Box w='100%' m='auto'>\r\n                    <Center mb='5px'>\r\n                        <Tileset tiles={gameState[gameStateIndex].revealedTiles.concat(gameState[gameStateIndex].bonusTiles)} />\r\n                    </Center>\r\n                </Box>\r\n                <Center w='100%' m='auto' mb='5px'>\r\n                    <Unselect handleSelectTile={handleSelectTile}>\r\n                        <HStack spacing=\"1px\">\r\n                            {tileList}\r\n                        </HStack>\r\n                    </Unselect>\r\n                </Center>\r\n            </Box>\r\n            }\r\n        </VStack>\r\n        </>\r\n    )\r\n}","import {Button, Box, Center, Table, Thead, Tbody, Th, Tr, Td, Modal, ModalOverlay, ModalContent, ModalHeader, useDisclosure, ModalBody, ModalFooter, ModalCloseButton} from '@chakra-ui/react'\r\nimport { useState, useEffect } from 'react'\r\n\r\nexport default function Summary({username, roundEnd, summary, handleNewGame, draw, isOpen, onOpen, onClose}) {  \r\n    const [newGame, setNewGame] = useState(true)\r\n    \r\n    useEffect(() => {\r\n        if (roundEnd){\r\n        onOpen()\r\n        setTimeout(() => {\r\n            setNewGame(false)}\r\n            ,3000)\r\n        }\r\n    },[roundEnd])\r\n\r\n    const nameDict = {\r\n        animalPoints: \"Animal Tiles\",\r\n        dragonPoints: \"Dragon Set\",\r\n        windPoints: \"Seat Flower\",\r\n        tableWindPoints: \"Prevailing Wind Set\",\r\n        yourWindPoints: \"Seat Wind Set\",\r\n        totalPoints: \"Total tai\",\r\n        allPong: \"All Pong\",\r\n        臭平和: \"All Chow\",\r\n        平和: \"Ping Wu\",\r\n        清一色: \"Full Color\",\r\n        混一色: \"Half Color\",\r\n        oneNine: \"All Terminals\",\r\n        halfOneNine: \"Terminals and Honors\",\r\n        七对子: \"7 Pairs\",\r\n        十三幺: \"13 Wonders\"\r\n    }\r\n    //When there is a summary\r\n    if (roundEnd){\r\n        let summary_filtered = []\r\n        //filter out to only those with points\r\n        summary = Object.keys(summary).forEach(key => {\r\n            //if value (point) is greater than 0\r\n            if (summary[key] > 0){\r\n                summary_filtered = summary_filtered.concat({\r\n                                        name: nameDict[key],\r\n                                        points: summary[key]\r\n                                    })\r\n            }\r\n        })\r\n\r\n        const table = summary_filtered.map(e => {\r\n            return (\r\n                <Tr>\r\n                    <Td>{e.name}</Td>\r\n                    <Td isNumeric>{e.points}</Td>\r\n                </Tr>\r\n            )\r\n        })\r\n\r\n        console.log(\"Summary filtered\", summary_filtered)\r\n        \r\n        if (!draw){\r\n            return (\r\n                <>\r\n                    <Modal isOpen={isOpen} onClose={onClose}>\r\n                    <ModalOverlay />\r\n                    <ModalContent>\r\n                        <ModalHeader h='10px'>\r\n                            <Center>\r\n                                {username.username} wins!\r\n                            </Center>\r\n                        </ModalHeader>\r\n                        <ModalCloseButton />\r\n                        <ModalBody >\r\n                            <Table variant=\"striped\" size='sm'>\r\n                                <Thead>\r\n                                    <Tr>\r\n                                        <Th>Name</Th>\r\n                                        <Th isNumeric>Double</Th>\r\n                                    </Tr>\r\n                                </Thead>\r\n                                <Tbody>\r\n                                    {table}\r\n                                </Tbody>\r\n                            </Table>\r\n                        </ModalBody>\r\n                        <ModalFooter>\r\n                            <Button size='sm' isDisabled={newGame} onClick={handleNewGame} >New game</Button>\r\n                        </ModalFooter>\r\n                    </ModalContent>\r\n                    </Modal>\r\n                </>\r\n            )\r\n        }else{\r\n            return(\r\n                <Modal isOpen={isOpen} onClose={onClose}>\r\n                    <ModalOverlay />\r\n                    <ModalContent>\r\n                        <ModalHeader>Draw</ModalHeader>\r\n                        <ModalCloseButton />\r\n                        <ModalFooter>\r\n                            <Button isDisabled={newGame} onClick={handleNewGame} >New game</Button>\r\n                        </ModalFooter>\r\n                    </ModalContent>\r\n                    </Modal>\r\n            )\r\n        }\r\n    }\r\n\r\n    return null\r\n}","import { Collapse, Box, Flex, Spacer, HStack, Image, Text, useDisclosure } from \"@chakra-ui/react\"\r\nimport Tile from \"./Tile\"\r\n\r\nexport default function ScoreInfo({name, score, info, pictures}) {\r\n    const { isOpen, onToggle } = useDisclosure()\r\n\r\n    const combination = pictures.map((picture) => {\r\n        if (picture === \"\"){\r\n            return(\r\n                <Box w='10px' />\r\n            )\r\n        }else{\r\n            return(\r\n                <Image src={\"/images/\" + picture + \".jpg\"} fallbackSrc=\"\"  h=\"26px\" borderRadius=\"5px\" borderWidth=\"1px\" borderColor=\"#343434\" borderStyle=\"solid\" boxShadow={`1.2px 2px #000000`} />\r\n            )\r\n        }\r\n    })\r\n\r\n    return(\r\n        <Box>\r\n            <Flex>\r\n                <Box _hover={{\"text-decoration\": \"underline\"}} onClick={onToggle}>{name}</Box>\r\n                <Spacer />\r\n                {score}\r\n            </Flex>\r\n            <Collapse in={isOpen}>\r\n                {info.split(\".\").map((sentence) => {\r\n                    return(\r\n                        <Text align='left' justifyContent fontSize={12}>\r\n                            {sentence}\r\n                        </Text>\r\n                    )\r\n                    })}\r\n                <HStack spacing='0px'>\r\n                    {combination}\r\n                </HStack>\r\n            </Collapse>\r\n        </Box>\r\n    )\r\n}","import {Tabs, TabList, TabPanels, Tab, TabPanel, useClipboard, Input, InputGroup, InputRightElement, Text, VStack, Spacer, Button, ButtonGroup, Image, Heading, Flex, Box} from '@chakra-ui/react'\r\nimport { CopyIcon, CheckIcon } from \"@chakra-ui/icons\"\r\nimport NameCard from './NameCard'\r\nimport ScoreInfo from './ScoreInfo'\r\n\r\nexport default function Information({tableWind,yourWind, playerID, currentPlayer, gameState, handleNewGame, roundEnd, onOpen, summary}){\r\n    //Invite link\r\n    const {hasCopied, onCopy} = useClipboard(window.location.href)\r\n    \r\n    const score = gameState.map((player) => {\r\n        return(\r\n            <Flex w='100%' >\r\n                {player.username}\r\n                <Spacer />\r\n                {player.score}\r\n            </Flex>\r\n        )\r\n    })\r\n    const flowerIndex = {\r\n        \"~east\": 1,\r\n        \"~south\": 2,\r\n        \"~west\": 3,\r\n        \"~north\": 4\r\n    }\r\n    const scoreList = [\r\n        {\r\n            name: \"Prevailing wind set\",\r\n            score: 1,\r\n            info: \"Pong or kong of prevailing wind\",\r\n            pictures: tableWind ? [tableWind,tableWind,tableWind] : [\"~east\",\"~east\",\"~east\"]\r\n        },\r\n        {\r\n            name: \"Seat wind set\",\r\n            score: 1,\r\n            info: \"Pong or kong of seat wind\",\r\n            pictures: yourWind ? [yourWind,yourWind,yourWind] : [\"~east\",\"~east\",\"~east\"]\r\n        },\r\n        {\r\n            name: \"Dragon tiles set\",\r\n            score: 1,\r\n            info: \"Pong or kong of any dragon tiles\",\r\n            pictures: [\"~red\",\"~red\",\"~red\"]\r\n        },\r\n        {\r\n            name: \"All Chow\",\r\n            score: 1,\r\n            info: \"Four sets of sequentials with an eye. Eye must not be prevailing or seat wind or dragon tile. Unless self-drawn, must have a two-sided wait\",\r\n            pictures: [\"bamboo1\",\"bamboo2\",\"bamboo3\",\"circles1\",\"circles2\",\"circles3\",\"numbers5\",\"numbers5\"]\r\n        },\r\n        {\r\n            name: \"Seat flower\",\r\n            score: 1,\r\n            info: \"Flower corresponding to your seat position\",\r\n            pictures: yourWind ? [\"flowers\"+flowerIndex[yourWind],\"flowers\"+(flowerIndex[yourWind]+4)] : [\"flowers1\",\"flowers5\"]\r\n        },\r\n        {\r\n            name: \"Animal tile\",\r\n            score: 1,\r\n            info: \"Any animal tile\",\r\n            pictures: [\"cat\",\"mouse\",\"rooster\",\"centipede\"]\r\n        },\r\n        {\r\n            name: \"All Pong\",\r\n            score: 2,\r\n            info: \"Four sets of pong or kong with an eye\",\r\n            pictures: [\"bamboo2\",\"bamboo2\",\"bamboo2\",\"numbers6\",\"numbers6\",\"numbers6\",\"~white\",\"~white\"]\r\n        },\r\n        {\r\n            name: \"Mixed suit\",\r\n            score: 2,\r\n            info: \"Mahjong with one suit and honors\",\r\n            pictures: [\"~east\",\"~east\",\"~east\",\"bamboo9\",\"bamboo9\",\"bamboo9\",\"~red\",\"~red\"]\r\n        },\r\n        {\r\n            name: \"Terminals and Honors\",\r\n            score: 2,\r\n            info: \"Mahjong with 1s, 9s, and honors\",\r\n            pictures: [\"circles1\",\"circles1\",\"circles1\",\"numbers9\",\"numbers9\",\"numbers9\",\"~north\",\"~north\"]\r\n        },\r\n        {\r\n            name: \"7 Pairs\",\r\n            score: 3,\r\n            info: \"7 eyes\",\r\n            pictures: [\"~east\",\"~east\",\"~west\",\"~west\",\"~green\",\"~green\",\"circles5\",\"circles5\"]\r\n        },\r\n        {\r\n            name: \"Ping Wu\",\r\n            score: 4,\r\n            info: \"All chow without flower or animal tiles\",\r\n            pictures: [\"bamboo4\",\"bamboo5\",\"bamboo6\",\"circles4\",\"circles5\",\"circles6\",\"numbers7\",\"numbers7\"]\r\n        },\r\n        {\r\n            name: \"Full Color\",\r\n            score: 4,\r\n            info: \"Mahjong with only one suit\",\r\n            pictures: [\"numbers1\",\"numbers2\",\"numbers3\",\"numbers8\",\"numbers8\",\"numbers8\",\"numbers9\",\"numbers9\"]\r\n        },\r\n        {\r\n            name: \"13 Wonders\",\r\n            score: 5,\r\n            info: \"Each terminal and honors. Any eye\",\r\n            pictures: [\"bamboo1\",\"bamboo9\",\"~east\",\"~south\",\"~west\",\"~north\",\"~red\",\"~red\"]\r\n        },\r\n        {\r\n            name: \"All Terminals\",\r\n            score: 5,\r\n            info: \"Mahjong with only 1s and 9s\",\r\n            pictures: [\"numbers1\",\"numbers1\",\"numbers1\",\"circles1\",\"circles1\",\"circles1\",\"bamboo9\",\"bamboo9\"]\r\n        },\r\n    ]\r\n\r\n    const scoreTable = scoreList.map((e) => {\r\n        return(\r\n            <ScoreInfo name={e.name} score={e.score} info={e.info} pictures={e.pictures} />\r\n        )\r\n    })\r\n\r\n    const pettyList = [\r\n        {\r\n            name: \"Predator Prey\",\r\n            score: 1,\r\n            info: \"Cat-mouse rooster-centipede pair\",\r\n            pictures: [\"cat\",\"mouse\",\"\",\"rooster\",\"centipede\"]\r\n        },\r\n        {\r\n            name: \"Flower Pair\",\r\n            score: 1,\r\n            info: \"Own an opponent flower pair\",\r\n            pictures: [\"flowers\"+((flowerIndex[yourWind]+1)%8),\"flowers\"+((flowerIndex[yourWind]+5)%8)]\r\n        },\r\n        {\r\n            name: \"Concealed Kong\",\r\n            score: 2,\r\n            info: \"Perform a one/three tiles concealed kong\",\r\n            pictures: ['bamboo8','bamboo8','bamboo8','bamboo8']\r\n        },\r\n        {\r\n            name: \"Flowers Set (u/c)\",\r\n            score: 4,\r\n            info: \"Own all red or black flowers\",\r\n            pictures: [\"flowers1\",\"flowers2\",\"flowers3\",\"flowers4\",\"flowers5\",\"flowers6\",\"flowers7\",\"flowers8\"]\r\n        },\r\n        {\r\n            name: \"Animals Set (u/c)\",\r\n            score: 4,\r\n            info: \"Own all animal tiles\",\r\n            pictures: [\"cat\",\"mouse\",\"rooster\",\"centipede\"]\r\n        },\r\n    ]\r\n\r\n    const pettyTable = pettyList.map((e) => {\r\n        return(\r\n            <ScoreInfo name={e.name} score={e.score} info={e.info} pictures={e.pictures} />\r\n        )\r\n    })\r\n\r\n    let username\r\n    if (gameState.find(e => e.playerID === playerID)){\r\n        username = gameState.find(e => e.playerID === playerID).username\r\n        console.log(\"USERNAME: \", username)\r\n    }\r\n\r\n    return(\r\n        <Tabs mr='10px' align='center' variant='enclosed' isFitted>\r\n            <TabList>\r\n                <Tab>Table</Tab>\r\n                <Tab>Scoring</Tab>\r\n            </TabList>\r\n\r\n            <TabPanels >\r\n                <TabPanel w='200px'>\r\n                    <VStack spacing='25px'>\r\n                        <Box mt='5px'>\r\n                            <NameCard playerID={playerID} username={username} currentPlayer={currentPlayer} wind={yourWind}/>\r\n                            <Flex w='190px'>Prevailing Wind <Spacer /> <Image src={ \"/images/\" + tableWind + \".jpg\"} fallbackSrc=\"/images/blank.jpg\" h='30px' borderRadius=\"5px\" /> </Flex>\r\n                        </Box>\r\n                        <Box>\r\n                            <Heading fontSize={20} mb='5px'>Leaderboard</Heading>\r\n                            <Box w='190px'>\r\n                                {score}\r\n                            </Box>\r\n                        </Box>\r\n                        <Flex>\r\n                            <ButtonGroup isAttached size='sm' variant='outline'>\r\n                                <Button disabled={!roundEnd} onClick={onOpen}>Summary</Button>\r\n                                <Button disabled={!roundEnd} onClick={handleNewGame}>New game</Button>\r\n                            </ButtonGroup>\r\n                        </Flex>\r\n                        <Box>\r\n                            <Text textAlign='left' p='0px' m='0px'>Invite link</Text>\r\n                            <InputGroup>\r\n                                <Input h='30px' px='2px' variant='filled' value={hasCopied ? \"Copied!\" : window.location.href}  isReadOnly />\r\n                                <InputRightElement h='30px'>\r\n                                    <Button h='30px' onClick={onCopy} variant='outline'> {hasCopied? <CheckIcon h='20px' /> : <CopyIcon h='20px' />} </Button>\r\n                                </InputRightElement>\r\n                            </InputGroup>\r\n                        </Box>\r\n                    </VStack>\r\n\r\n                </TabPanel>\r\n                <TabPanel w='200px'>\r\n                    <Flex w='100%' >\r\n                        <strong>Name</strong>\r\n                        <Spacer />\r\n                        <strong>Double</strong>\r\n                    </Flex>\r\n                    {scoreTable}\r\n                    <Flex w='100%' mt='10px' >\r\n                        <strong>Instant Payout</strong>\r\n                        <Spacer />\r\n                        <strong>Points</strong>\r\n                    </Flex>\r\n                    {pettyTable}\r\n                </TabPanel>\r\n            </TabPanels>\r\n        </Tabs>\r\n    )\r\n}\r\n","import {useState} from 'react'\r\nimport {Flex, Spacer, FormControl, Button, Input, Modal, ModalOverlay, ModalHeader,ModalBody, ModalContent, useDisclosure} from \"@chakra-ui/react\"\r\n\r\nexport default function Username({sendMessage}) {\r\n    const {isOpen, onOpen, onClose } = useDisclosure({defaultIsOpen:true})\r\n    const [username, setUsername] = useState('')\r\n\r\n    const onUsernameChange = (event) => {\r\n        setUsername(event.target.value)\r\n    }\r\n\r\n    //Set Username\r\n    const submitUsername = () => {\r\n        onClose()\r\n        sendMessage(\"Username: \"+username)\r\n    }\r\n    \r\n    return(\r\n        <Modal isOpen={isOpen} onClose={onClose} closeOnOverlayClick={false}>\r\n            <ModalOverlay />\r\n            <ModalContent>\r\n                <ModalHeader>Username</ModalHeader>\r\n                <FormControl px='20px'>\r\n                    <Input onKeyPress={(e) => { (e.key===\"Enter\") ? submitUsername() : console.log() }} onChange={onUsernameChange} value={username} placeholder=\"Username\" />\r\n                    <Flex>\r\n                        <Spacer />\r\n                        <Button my='10px' onClick={submitUsername} type='submit'>Submit</Button>\r\n                    </Flex>\r\n                </FormControl>\r\n            </ModalContent>\r\n        </Modal>\r\n    )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport useWebSocket, { ReadyState } from 'react-use-websocket';\r\nimport {Flex, Box, useDisclosure} from '@chakra-ui/react'\r\nimport { useParams } from \"react-router-dom\"\r\nimport { checkGame, compare, getChow } from './Mahjong';\r\nimport Board from './Board'\r\nimport Summary from './Summary';\r\nimport Information from './Information';\r\nimport Username from './Username';\r\n\r\nexport default function Table() {\r\n  let sequentialTiles_top, sequentialTiles_mid, sequentialTiles_bot\r\n  const gameId = useParams().gameId\r\n  //socket stuff\r\n  const [socketUrl, setSocketUrl] = useState(`ws://localhost:3001/${gameId}`); //`ws://localhost:3001/${gameId}` || `wss://mahjong.irscybersec.tk/api/${gameId}`\r\n  const [messageHistory, setMessageHistory] = useState([]);\r\n  //set users\r\n  const [onlineUsers, setOnlineUsers] = useState([])\r\n  const [clientID, setClientID] = useState([])\r\n  const [winnerID, setWinnerID] = useState()\r\n  const [currentPlayer, setCurrentPlayer] = useState()\r\n  const [previousPlayer, setPreviousPlayer] = useState(null)\r\n  //set tiles\r\n  const [tiles, setTiles] = useState([])\r\n  const [newTile, setNewTile] = useState()\r\n  const [bonusTiles, setBonusTiles] = useState([])\r\n  const [revealedTiles, setRevealedTiles] = useState([])\r\n  //set winds\r\n  const [yourWind, setYourWind] = useState('')\r\n  const [tableWind, setTableWind] = useState('')\r\n  //discard pile\r\n  const [discards, setDiscards] = useState([])\r\n  const [lastDiscard, setLastDiscard] = useState()\r\n  //moves\r\n  const [sequentialTiles, setSequentialTiles] = useState([])\r\n  const [pongTiles, setPongTiles] = useState([])\r\n  const [kongTiles, setKongTiles] = useState([])\r\n  const [game, setGame] = useState(false)\r\n  const [summary, setSummary] = useState()\r\n  //others\r\n  const [currentTurn, setCurrentTurn] = useState(false) //whether it is your turn\r\n  const { isOpen: isOpenSummary, onOpen: onOpenSummary, onClose: onCloseSummary } = useDisclosure() //for Summary\r\n  const [draw, setDraw] = useState(false)\r\n  const [roundEnd, setRoundEnd] = useState(false)\r\n  const [minimumPoints, setMinimumPoints] = useState(1)\r\n  const [delay, setDelay] = useState(3000) //set turn timer\r\n  const [gameState, setGameState] = useState([]) \r\n  /* [  socket: Websocket,\r\n        playerID: playerID,\r\n        handLength: number of tiles,\r\n        bonusTiles: bonus tiles,\r\n        revealedTile\": revealed tiles }] */\r\n\r\n  //select tiles\r\n  const [selectedTile, setSelectedTile] = useState(null)\r\n  const handleSelectTile = (tile) => {\r\n    console.log(tile)\r\n    setSelectedTile(tile)\r\n  }\r\n\r\n  //discarding tiles\r\n  const handleDiscard = () => {\r\n    if (!roundEnd){\r\n      game ? setGame(false) : setGame(false) //if self-drawn, set game back to false\r\n      console.log(\"Discarding \", selectedTile)\r\n      sendMessage('Discard: ' + JSON.stringify(selectedTile))\r\n      //filter out the discarded tile from our hand\r\n      let newTiles = tiles.filter(e => !((e.suit===selectedTile.suit) && (e.value===selectedTile.value) && (e.id===selectedTile.id)) )\r\n\r\n      setTiles(newTiles)\r\n      setSelectedTile(null)\r\n      //empty kong tiles if I'm not using it\r\n      setKongTiles([])\r\n      setCurrentTurn(false)\r\n    }\r\n  }\r\n\r\n  //function for checking for immediate payouts\r\n  const checkPetty = (bonuses) => {\r\n    //check within the new bonus tiles\r\n    //predator prey\r\n    if (bonuses.filter(e => (e.suit === \"cat\") || (e.suit === \"mouse\")).length === 2){\r\n      console.log(\"CAT MOUSE PAIR\")\r\n      sendMessage(\"AnimalPair\")\r\n    } else if (bonuses.filter(e => (e.suit === \"rooster\") || (e.suit === \"centipede\")).length === 2){\r\n      console.log(\"ROOSTER CENTIPEDE PAIR\")\r\n      sendMessage(\"AnimalPair\")\r\n    }\r\n\r\n    if (bonuses.filter(e => (e.value === 1)).length === 2){\r\n      console.log(\"FlowerPair 1\")\r\n      sendMessage(\"FlowerPair ~east\")\r\n    } else if (bonuses.filter(e => (e.value === 2)).length === 2){\r\n      console.log(\"2 FLOWER PAIR\")\r\n      sendMessage(\"FlowerPair ~south\")\r\n    } else if (bonuses.filter(e => (e.value === 3)).length === 2){\r\n      console.log(\"3 FLOWER PAIR\")\r\n      sendMessage(\"FlowerPair ~west\")\r\n    } else if (bonuses.filter(e => (e.value === 4)).length === 2){\r\n      console.log(\"4 FLOWER PAIR\")\r\n      sendMessage(\"FlowerPair ~north\")\r\n    }\r\n\r\n    //flowers\r\n    //for each bonus\r\n    bonuses.forEach(bonus => {\r\n      //check for predator prey\r\n      if ((bonus.suit === \"mouse\" && bonusTiles.filter(e => e.suit === \"cat\").length > 0) || (bonus.suit === \"cat\" && bonusTiles.filter(e => e.suit === \"mouse\").length > 0) ){\r\n        console.log(\"CAT MOUSE PAIR\")\r\n        sendMessage(\"AnimalPair\")\r\n      }else if ((bonus.suit === \"rooster\" && bonusTiles.filter(e => e.suit === \"centipede\").length > 0) || (bonus.suit === \"centipede\" && bonusTiles.filter(e => e.suit === \"rooster\").length > 0) ){\r\n        console.log(\"ROOSTER CENTIPEDE PAIR\")\r\n        sendMessage(\"AnimalPair\")\r\n      }\r\n\r\n      //check for flower pair\r\n      if (bonusTiles.filter(e => e.value === bonus.value).length === 1){\r\n        console.log(`${bonus.value} FLOWER PAIR`)\r\n      }\r\n    })\r\n  }\r\n\r\n  const lookup = tiles.reduce((a, e) => {\r\n    a[`${e.suit} ${e.value}`] = ++a[`${e.suit} ${e.value}`] || 0;\r\n    return a;\r\n  }, {});\r\n\r\n  const checkKong = (newTile) => {\r\n    //check kong within hand\r\n    let four_concealed = tiles.filter(e => (e.suit === newTile.suit) && (e.value === newTile.value)).concat(newTile)\r\n    let kongSets = tiles.filter(e => lookup[`${e.suit} ${e.value}`] == 3)\r\n\r\n    if (four_concealed.length == 4){\r\n      setKongTiles([four_concealed.concat(\"four\")])\r\n      console.log(\"Four concealed kong\", four_concealed)\r\n    }else if(kongSets){\r\n      setKongTiles([kongSets.concat(\"four\")])\r\n      console.log(\"kongSets\", kongSets)\r\n    }\r\n\r\n    //check kong in exposed\r\n    let gameStateIndex = gameState.findIndex(e => e.playerID === clientID)\r\n    let exposed = gameState[gameStateIndex].revealedTiles\r\n    let one_concealed = exposed.filter(e => (e.suit === newTile.suit) && (e.value === newTile.value)).concat(newTile)\r\n    if (one_concealed.length == 4){\r\n      setKongTiles([one_concealed.concat(\"four\")])\r\n      console.log(\"One concealed kong\",one_concealed)\r\n    }\r\n  }\r\n\r\n  //functions for making moves (chow, pong, kong, game)\r\n  const checkValidMoves = (lastDiscard) => {\r\n    //if there was a last discard and last discarder is not the player\r\n    if (lastDiscard && clientID !== previousPlayer){\r\n      //check for winning hand\r\n      let [game_temp, summary_temp] = checkGame(tiles,revealedTiles,bonusTiles,tableWind,yourWind, lastDiscard, [])\r\n      setSummary(summary_temp)\r\n      console.log(\"Summary: \",summary_temp)\r\n      //if the discarded tile builds a winning hand and has more than minimum points\r\n      if (game_temp && summary_temp.totalpoints >= minimumPoints) {\r\n        setGame(game_temp)\r\n        setTimeout(() => {\r\n          setGame(false)\r\n        },delay)\r\n      }\r\n      //check for pong\r\n      let sameTiles = tiles.filter(e => (e.suit === lastDiscard.suit) && (e.value === lastDiscard.value)).concat(lastDiscard)\r\n      console.log(\"Same tiles: \", sameTiles)\r\n      if (sameTiles.length == 3) {\r\n        setPongTiles([sameTiles])\r\n        setTimeout(() => {\r\n          setPongTiles([])\r\n        },delay)\r\n      }else if (sameTiles.length == 4){\r\n        setKongTiles([sameTiles.concat(\"three\")])\r\n        setTimeout(() => {\r\n          setKongTiles([])\r\n        },delay)\r\n      }\r\n\r\n      //check if last discard is from the guy before you\r\n      if (gameState.at(gameState.findIndex(e => e.playerID===clientID) - 1).playerID === previousPlayer){\r\n        //check for chow\r\n        sequentialTiles_top = tiles.filter(e => (e.suit === lastDiscard.suit) && (e.value === lastDiscard.value-1 || e.value === lastDiscard.value-2 ) )\r\n        sequentialTiles_mid = tiles.filter(e => (e.suit === lastDiscard.suit) && (e.value === lastDiscard.value-1 || e.value === lastDiscard.value+1 ) )\r\n        sequentialTiles_bot = tiles.filter(e => (e.suit === lastDiscard.suit) && (e.value === lastDiscard.value+1 || e.value === lastDiscard.value+2 ) )\r\n        //check for unique chow values\r\n        sequentialTiles_top = getChow(sequentialTiles_top)\r\n        sequentialTiles_mid = getChow(sequentialTiles_mid)\r\n        sequentialTiles_bot = getChow(sequentialTiles_bot)\r\n        //check for multiple chows\r\n        let sequentialTiles_temp = [sequentialTiles_top,sequentialTiles_mid,sequentialTiles_bot].filter(e => e.length===2)\r\n\r\n        if (sequentialTiles_temp.length > 0){\r\n          setSequentialTiles(sequentialTiles_temp)\r\n          setTimeout(() => {\r\n            setSequentialTiles([])\r\n          },delay)\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  const handlePong = (pongSet) => {\r\n    console.log(\"PONG!\", pongTiles)\r\n    setPongTiles([])\r\n    sendMessage(clientID + \" pong \" + JSON.stringify(pongSet))\r\n  }\r\n\r\n  const handleKong = (kongSet, type) => {\r\n    console.log(\"KONG!\", kongSet, type)\r\n    setKongTiles([])\r\n    if (type === \"three\"){\r\n      sendMessage(clientID + \" threekong \" + JSON.stringify(kongSet))\r\n    }else if (type===\"four\"){\r\n      sendMessage(clientID + \" fourkong \" + JSON.stringify(kongSet))\r\n    }else if (type===\"one\"){\r\n      sendMessage(clientID + \" onekong \" + JSON.stringify(kongSet))\r\n    }\r\n  }\r\n\r\n  const handleChow = (chowSet) => {\r\n    console.log(\"CHOW!\", sequentialTiles)\r\n    setSequentialTiles([])\r\n    sendMessage(clientID + \" chow \" + JSON.stringify(chowSet))\r\n  }\r\n\r\n  const handleGame = () => {\r\n    sendMessage(clientID + \" WINS! \"+JSON.stringify(summary)+\" \"+JSON.stringify(tiles))\r\n    setGame(false)\r\n    setTiles([])\r\n  }\r\n\r\n  const handleNewGame = () => {\r\n    sendMessage(\"New game!\")\r\n  }\r\n\r\n  const {\r\n    sendMessage,\r\n    lastMessage,\r\n    readyState,\r\n  } = useWebSocket(socketUrl);\r\n\r\n  const connectionStatus = {\r\n    [ReadyState.CONNECTING]: 'Connecting',\r\n    [ReadyState.OPEN]: 'Connected',\r\n    [ReadyState.CLOSING]: 'Closing',\r\n    [ReadyState.CLOSED]: 'Disconnected',\r\n    [ReadyState.UNINSTANTIATED]: 'Uninstantiated',\r\n  }[readyState];\r\n  \r\n  useEffect(() => {\r\n    if (lastMessage !== null) {\r\n      console.log(\"Last message: \",lastMessage.data)\r\n      setMessageHistory(prev => prev.concat(lastMessage));\r\n      if (lastMessage.data.includes(\"Online users:\")) {\r\n        let userList = lastMessage.data.replace(\"Online users: \",\"\")\r\n        setOnlineUsers(userList)\r\n      }else if (lastMessage.data.includes(\"Game state\")) {\r\n        let gameState_temp = lastMessage.data.replace(\"Game state: \",\"\")\r\n        console.log(\"Game state: \", gameState_temp)\r\n        setGameState(JSON.parse(gameState_temp))\r\n      }else if (lastMessage.data.includes(\"Your ID\")) {\r\n        let clientID_temp = lastMessage.data.replace(\"Your ID: \",\"\")\r\n        setClientID(clientID_temp)\r\n      } else if (lastMessage.data.includes(\"Tiles\")) {\r\n        let tiles_temp = JSON.parse(lastMessage.data.replace(\"Tiles: \",\"\"))\r\n        if (tiles_temp.length === 13){\r\n          setTiles(tiles_temp.sort(compare)) //new hand\r\n        }else{\r\n          setTiles(prev => prev.concat(tiles_temp).sort(compare)) //new tile\r\n        }\r\n        setNewTile(tiles_temp)\r\n        console.log(\"New tiles:\", tiles_temp)\r\n        //if a new tile is drawn, check if 自摸 or concealed kong\r\n        if (tiles_temp.length !== 13){\r\n          console.log(\"Tiles:\",tiles)\r\n          let [game_temp, summary_temp] = checkGame(tiles,revealedTiles,bonusTiles,tableWind,yourWind,[], tiles_temp)\r\n          checkKong(tiles_temp)\r\n          setGame(game_temp)\r\n          setSummary(summary_temp)\r\n        }\r\n      } else if (lastMessage.data.includes(\"Bonus\")) {\r\n        let bonusTiles_temp = JSON.parse(lastMessage.data.replace(\"Bonus: \",\"\"))\r\n        checkPetty(bonusTiles_temp)\r\n        setBonusTiles(prev => prev.concat(bonusTiles_temp))\r\n      }else if (lastMessage.data.includes(\"Table wind\")) {\r\n        setTableWind(lastMessage.data.replace(\"Table wind: \",\"\"))\r\n      }else if (lastMessage.data.includes(\"Your wind\")) {\r\n        setYourWind(lastMessage.data.replace(\"Your wind: \",\"\"))\r\n      }else if (lastMessage.data.includes(\"It is your turn\")) {\r\n        setCurrentTurn(true)\r\n      }else if (lastMessage.data.includes(\"Discards\")) {\r\n        let discards_temp = JSON.parse(lastMessage.data.replace(\"Discards: \", \"\"))\r\n        setDiscards(discards_temp)\r\n        setLastDiscard(discards_temp.at(-1))\r\n        console.log(\"Last discarded\", discards_temp.at(-1))\r\n        checkValidMoves(discards_temp.at(-1))\r\n      }else if (lastMessage.data.includes(\"Previous player: \")) {\r\n        setPreviousPlayer(lastMessage.data.replace(\"Previous player: \",\"\"))\r\n      }else if (lastMessage.data.includes(\"Ping!\")){\r\n        sendMessage(\"Pong!\")\r\n      }else if (lastMessage.data.includes(\"Revealed\")) {\r\n        //sucessfull move made\r\n        let revealedTiles_temp = JSON.parse(lastMessage.data.replace(\"Revealed: \",\"\"))\r\n        let newTiles = tiles\r\n        console.log(\"New Tiles: \", newTiles)\r\n        //remove from our hand\r\n        for (let i=0; i<revealedTiles_temp.length; i++){\r\n          console.log(\"Target: \",revealedTiles_temp[i])\r\n          console.log(\"Target Index: \", newTiles.indexOf(revealedTiles_temp[i]))\r\n          newTiles = newTiles.filter((tile) => !((tile.suit === revealedTiles_temp[i].suit) && (tile.value === revealedTiles_temp[i].value) && (tile.id === revealedTiles_temp[i].id)))\r\n        }\r\n        setTiles(newTiles)\r\n        setRevealedTiles(prev => prev.concat(revealedTiles_temp).sort(compare))\r\n      }else if (lastMessage.data.includes(\"Current player: \")){\r\n        let currentPlayer_temp = lastMessage.data.replace(\"Current player: \",\"\")\r\n        setCurrentPlayer(currentPlayer_temp.substring(1, currentPlayer_temp.length-1))\r\n      }else if (lastMessage.data.includes(\"New game!\")) {\r\n        setRoundEnd(false)\r\n        setDraw(false)\r\n        setDiscards([])\r\n        setLastDiscard()\r\n        setBonusTiles([])\r\n        setRevealedTiles([])\r\n        setSelectedTile()\r\n      }else if (lastMessage.data.includes(\"wins\")) {\r\n        sendMessage(\"ShowAll: \" + JSON.stringify(tiles))\r\n        setTiles([])\r\n        setRoundEnd(true)\r\n        let summary_temp = JSON.parse(lastMessage.data.split(\" \")[2])\r\n        setSummary(summary_temp)\r\n        setWinnerID(lastMessage.data.split(\" \")[0])\r\n      }else if (lastMessage.data.includes(\"Draw:\")) {\r\n        setDraw(true)\r\n        setRoundEnd(true)\r\n        sendMessage(\"ShowAll: \" + JSON.stringify(tiles))\r\n        setTiles([])\r\n      }\r\n    }\r\n  }, [lastMessage, setMessageHistory]);\r\n\r\n\r\n  return (\r\n    <>\r\n      <Username sendMessage={sendMessage} />\r\n      <Flex>\r\n        <Board clientID={clientID} tiles={tiles} newTile={newTile} handleSelectTile={handleSelectTile} currentTurn={currentTurn} currentPlayer={currentPlayer} gameState={gameState} discards={discards}  selectedTile={selectedTile} handleDiscard={handleDiscard} lastDiscard={lastDiscard} pongTiles={pongTiles} handlePong={handlePong}handleChow={handleChow} sequentialTiles={sequentialTiles} kongTiles={kongTiles} handleKong={handleKong} game={game} handleGame={handleGame} />\r\n        <Information tableWind={tableWind} yourWind={yourWind} playerID={clientID} currentPlayer={currentPlayer} gameState={gameState} handleNewGame={handleNewGame} roundEnd={roundEnd} onOpen={onOpenSummary} summary={summary} />\r\n      </Flex>\r\n\r\n      <Box>\r\n        <Summary username={gameState.find(e => e.playerID === winnerID)} roundEnd={roundEnd} summary={summary} handleNewGame={handleNewGame} draw={draw} isOpen={isOpenSummary} onOpen={onOpenSummary} onClose={onCloseSummary} />\r\n        <p>Connection Status: {connectionStatus}</p>\r\n      </Box>\r\n    </>\r\n  );\r\n};","export default __webpack_public_path__ + \"static/media/mahjongVid.74b8b9da.webm\";","import {Center,Text, Box, Button, Flex, InputGroup, Input, InputRightElement, Collapse, useDisclosure} from '@chakra-ui/react'\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { useState } from \"react\"\r\nimport bgVid from \"../videos/mahjongVid.webm\"\r\nimport \"../App.css\"\r\n\r\nexport default function Menu(){\r\n    let navigate = useNavigate()\r\n    const [gameCode, setGameCode] = useState(\"\")\r\n    const [width, setWidth] = useState(\"100%\")\r\n    const { isOpen, onToggle } = useDisclosure()\r\n    \r\n    function toggleJoin(){\r\n        setWidth(\"35%\")\r\n        onToggle()\r\n    }\r\n\r\n    function handleCodeChange(e) {\r\n        setGameCode(e.target.value)\r\n    }\r\n\r\n    function gameID() {\r\n        function s4() {\r\n            return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\r\n        }\r\n        return s4() + s4() + s4();\r\n      };\r\n\r\n    function createGame() {\r\n        navigate(`/game/${gameID()}`)\r\n    }\r\n\r\n    function handleJoin() {\r\n        if (gameCode.length < 10){\r\n            alert(\"No room found\")\r\n        }else{\r\n            navigate(`/game/${gameCode}`)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Center h='100vh' w='100vw' bg='rgba(90,90,90,0.3)'>\r\n            <video autoPlay loop muted id='video'>\r\n                <source src={bgVid} type='video/webm' />\r\n            </video>\r\n            <Box w='300px' p=\"10px\" bgColor='rgba(240,240,240,0.9)' borderRadius=\"10px\">\r\n                <Center>\r\n                    <Text fontSize=\"24px\" textAlign='center'>Play <strong >Singapore Mahjong</strong> with your friends</Text>\r\n                </Center>\r\n                <Button onClick={createGame} w='100%' variant='outline' borderWidth=\"1px\" borderStyle='solid' borderColor='green' borderRadius=\"10px\">Create game</Button>\r\n\r\n                <Flex>\r\n                    <Collapse mt='7px' in={isOpen} direction=\"left\" animateOpacity>\r\n                        <Input px='2px' focusBorderColor='green' variant=\"flushed\"  placeholder='Invite code' value={gameCode} onChange={(e) => handleCodeChange(e)} />\r\n                    </Collapse>\r\n                \r\n                    <Button onClick={isOpen ? handleJoin : toggleJoin} w={width} variant='outline' _focus={{outline:\"none\"}} borderWidth=\"1px\" borderStyle='solid' borderColor='green' borderRadius=\"10px\">{isOpen ? \"Join\" : \"Join game\"} </Button>\r\n                </Flex>\r\n            </Box>\r\n        </Center>\r\n    )\r\n}","import Table from \"./components/Table\";\nimport Menu from \"./components/Menu\";\nimport {\n  BrowserRouter as HashRouter,\n  Routes, Route\n} from \"react-router-dom\"\n\nexport default function App() {\n  \n  return (\n    <HashRouter forceRefresh={true} basename={process.env.PUBLIC_URL + '/'}>\n      <Routes>\n        <Route path=\"/\" exact element = {<Menu />} />\n        <Route path=\"/game/:gameId\" exact element={<Table />} />\n      </Routes>\n    </HashRouter>\n  );\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\nimport {ChakraProvider} from '@chakra-ui/react'\n\nReactDOM.render(\n  <ChakraProvider>\n      <App />\n  </ChakraProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}