(this.webpackJsonpmahjong=this.webpackJsonpmahjong||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(41),i=n.n(c),r=n(37),s=n(5),l=n(31),u=n.n(l),o=n(9),d=n(69),j=n(6),b=n(53),O=n(50);function h(e,t){if(e.suit<t.suit)return-1;if(e.suit>t.suit)return 1;if(e.suit===t.suit){if(e.value<t.value)return-1;if(e.value>t.value)return 1}return 0}function f(e){var t,n=[],a=new Map,c=Object(O.a)(e);try{for(c.s();!(t=c.n()).done;){var i=t.value;a.has(i.value)||(a.set(i.value,!0),n.push({suit:i.suit,value:i.value,id:i.id,picture:i.picture}))}}catch(r){c.e(r)}finally{c.f()}return n}function x(e,t,n,a,c,i,r){var l,u=e.concat(t.concat(i).concat(r)).sort(h),o=e.concat(t.concat(i).concat(r)).sort(h),d=[{name:"allPong",value:!1,points:2},{name:"\u81ed\u5e73\u548c",value:!1,points:1},{name:"\u5e73\u548c",value:!1,points:4},{name:"\u6e05\u4e00\u8272",value:!1,points:4},{name:"\u6df7\u4e00\u8272",value:!1,points:2},{name:"oneNine",value:!1,points:5},{name:"halfOneNine",value:!1,points:1},{name:"\u4e03\u5bf9\u5b50",value:!1,points:5},{name:"\u5341\u4e09\u5e7a",value:!1,points:5}],j=function(e){var t=e.reduce((function(e,t){return e["".concat(t.suit," ").concat(t.value)]=++e["".concat(t.suit," ").concat(t.value)]||0,e}),{}),n=e.filter((function(e){return 1===t["".concat(e.suit," ").concat(e.value)]}));if(console.log("Pairs: ",n),14===n.length)return[!0,[],[],[],"\u4e03\u5bf9\u5b50"];var a=e.filter((function(e){return"bamboo"===e.suit&&1===e.value||"bamboo"===e.suit&&9===e.value||"circles"===e.suit&&1===e.value||"circles"===e.suit&&9===e.value||"numbers"===e.suit&&1===e.value||"numbers"===e.suit&&9===e.value||"~north"===e.suit||"~south"===e.suit||"~east"===e.suit||"~west"===e.suit||"~red"===e.suit||"~green"===e.suit||"~white"===e.suit}));console.log("\u5341\u4e09\u5e7a: ",a);var c=Object(b.a)(new Map(a.map((function(e){return[JSON.stringify([e.suit,e.value]),e]}))).values());if(14===a.length&&13===c.length)return[!0,[],[],[],"\u5341\u4e09\u5e7a"];for(var i=[],r=function(t){if(e[t]){var n=e.filter((function(n){return n.suit===e[t].suit&&(n.value===e[t].value-1||n.value===e[t].value-2)}));if(2===(n=f(n)).length){i=i.concat([[n[0],n[1],e[t]]]);var a=e.indexOf(e[t]),c=e.findIndex((function(e){return e.suit===n[1].suit&&e.value===n[1].value&&e.id===n[1].id})),r=e.findIndex((function(e){return e.suit===n[0].suit&&e.value===n[0].value&&e.id===n[0].id}));e.splice(a,1),e.splice(c,1),e.splice(r,1)}}},s=e.length-1;s>=2;s--)r(s);var l=e.reduce((function(e,t){return e["".concat(t.suit," ").concat(t.value)]=++e["".concat(t.suit," ").concat(t.value)]||0,e}),{}),u=e.filter((function(e){return l["".concat(e.suit," ").concat(e.value)]>=2})),o=e=e.filter((function(e){return l["".concat(e.suit," ").concat(e.value)]<2}));return console.log("Chow sets: ",i),console.log("Pong sets: ",u),console.log("Eye:",o),2===o.length&&o[0].suit===o[1].suit&&o[0].value===o[1].value?[!0,i,u,o,null]:[!1]}(u),O=Object(s.a)(j,5),x=O[0],v=O[1],g=O[2],p=O[3],m=O[4];if(m)"\u4e03\u5bf9\u5b50"===m?d[d.findIndex((function(e){return"\u4e03\u5bf9\u5b50"===e.name}))].value=!0:"\u5341\u4e09\u5e7a"===m&&(d[d.findIndex((function(e){return"\u5341\u4e09\u5e7a"===e.name}))].value=!0);else if(x){if(g.length>=12&&(d[d.findIndex((function(e){return"allPong"===e.name}))].value=!0),"~red"!=p[0].suit&&"~green"!=p[0].suit&&"~white"!=p[0].suit&&p[0].suit!=a&&p[0].suit!=c&&4===v.length)if(0!==i.length){var w=v.filter((function(e){return e.indexOf(i)>0}));w[0]!==i&&w[2]!==i||(0===n.length?d[d.findIndex((function(e){return"\u5e73\u548c"===e.name}))].value=!0:d[d.findIndex((function(e){return"\u81ed\u5e73\u548c"===e.name}))].value=!0)}else 0===n.length?d[d.findIndex((function(e){return"\u5e73\u548c"===e.name}))].value=!0:d[d.findIndex((function(e){return"\u81ed\u5e73\u548c"===e.name}))].value=!0;var S=Object(b.a)(new Set(o.map((function(e){return e.suit})))),y=["~east","~south","~west","~north","~red","~green","~white"];console.log("Suits: ",S),console.log("Filtered suits:",S.filter((function(e){return!y.includes(e)}))),1===S.length?d[d.findIndex((function(e){return"\u6e05\u4e00\u8272"===e.name}))].value=!0:1===S.filter((function(e){return!y.includes(e)})).length&&(d[d.findIndex((function(e){return"\u6df7\u4e00\u8272"===e.name}))].value=!0);var C=Object(b.a)(new Set(o.map((function(e){return e.value}))));console.log("oneNine: ",C.filter((function(e){return 9!==e&&1!==e&&null!==e}))),0===C.filter((function(e){return 9!==e&&1!==e})).length?d[d.findIndex((function(e){return"oneNine"===e.name}))].value=!0:0===C.filter((function(e){return 9!==e&&1!==e&&null!==e})).length&&(d[d.findIndex((function(e){return"halfOneNine"===e.name}))].value=!0);var I,T=["cat","mouse","rooster","centipede"],N=n.filter((function(e){return T.includes(e.suit)})).length;console.log("Animals: ",N);var P=["~east","~south","~west","~north"],D=n.filter((function(e){return!T.includes(e.suit)&&P[e.value-1]===c})).length;console.log("Winds: ",D);var E=["~red","~green","~white"],k=g.filter((function(e){return E.includes(e.suit)})).length/3;console.log("Dragon Tiles: ",k);var W=g.filter((function(e){return e.suit===a})).length/3;console.log("Table Wind: ",W);var R=g.filter((function(e){return e.suit===c})).length/3;function e(e,t){return e+t}console.log("Your Wind: ",R);var J=d.filter((function(e){return!0===e.value})).map((function(e){return e.points})).reduce(e,0);console.log("Combi points: ",J),I=k+W+R+J+N+D>5?5:k+W+R+J+N+D,console.log("Total points: ",I),l={animalPoints:N,windPoints:D,dragonPoints:k,tableWindPoints:W,yourWindPoints:R,combinationPoints:J,totalPoints:I,selfDrawn:0===i.length}}return[x,l]}var v=n(71),g=n(3);function p(e){var t=e.tiles;return"vertical"===e.direction?Object(g.jsx)(d.h,{spacing:"0px",children:t.map((function(e){return Object(g.jsx)(d.a,{fontSize:40,textShadow:"3px 4px #343434",h:"5vh",w:"6vh",children:e.picture})}))}):Object(g.jsx)(d.d,{spacing:"0px",children:t.map((function(e){return Object(g.jsx)(d.a,{fontSize:40,textShadow:"3px 4px #343434",h:"5vh",w:"6vh",children:e.picture})}))})}function m(e){var t=e.playerID,n=e.currentPlayer;return Object(g.jsx)(d.b,{children:Object(g.jsx)(d.g,{h:"3vh",overflow:"hidden",bg:n===t?"#f1f1f1":null,px:"5px",borderRadius:"10px",borderWidth:"1px",borderColor:"black",borderStyle:"solid",children:t})})}function w(e){var t=e.gameState,n=e.gameStateIndex,a=e.currentPlayer,c=e.playerIndex,i=function(e){return Array.apply(null,Array(t[e].handLength)).map((function(){})).map((function(){return Object(g.jsx)(d.a,{h:"3.5vh",w:"2vh",borderRadius:"5px",borderWidth:"1px",borderColor:"black",borderStyle:"solid"})}))};return 1===c?Object(g.jsx)(d.a,{children:t[(n+1)%4]&&Object(g.jsxs)(d.h,{spacing:"10px",children:[Object(g.jsx)(m,{playerID:t[(n+1)%4].username,currentPlayer:a}),Object(g.jsxs)(d.d,{children:[Object(g.jsx)(d.a,{w:"60px",children:Object(g.jsx)(p,{direction:"vertical",tiles:t[(n+1)%4].revealedTiles.concat(t[(n+1)%4].bonusTiles)})}),Object(g.jsx)(d.a,{children:Object(g.jsx)(d.h,{spacing:"2px",children:i((n+1)%4)})})]})]})}):2===c?Object(g.jsx)(d.a,{children:t[(n+2)%4]&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(m,{playerID:t[(n+2)%4].username,currentPlayer:a}),Object(g.jsxs)(d.a,{children:[Object(g.jsx)(d.d,{spacing:"2px",children:function(e){return Array.apply(null,Array(t[e].handLength)).map((function(){})).map((function(){return Object(g.jsx)(d.a,{h:"2vh",w:"3.5vh",borderRadius:"5px",borderWidth:"1px",borderColor:"black",borderStyle:"solid"})}))}((n+2)%4)}),Object(g.jsx)(d.b,{children:Object(g.jsx)(p,{tiles:t[(n+2)%4].revealedTiles.concat(t[(n+2)%4].bonusTiles)})})]})]})}):3===c?Object(g.jsx)(d.a,{children:t[(n+3)%4]&&Object(g.jsxs)(d.h,{spacing:"10px",children:[Object(g.jsx)(m,{playerID:t[(n+3)%4].username,currentPlayer:a}),Object(g.jsxs)(d.d,{children:[Object(g.jsx)(d.a,{children:Object(g.jsx)(d.h,{spacing:"2px",children:i((n+3)%4)})}),Object(g.jsx)(d.a,{w:"60px",children:Object(g.jsx)(p,{direction:"vertical",tiles:t[(n+3)%4].revealedTiles.concat(t[(n+3)%4].bonusTiles)})})]})]})}):void 0}function S(e){var t=e.discards.map((function(e,t){return Object(g.jsx)(d.a,{fontSize:40,textShadow:"3px 4px #343434",h:"5vh",w:"6vh",children:e.picture})}));return Object(g.jsx)(d.i,{spacing:"1px",h:"50vh",w:"50vh",children:t})}function y(e){var t,n,c=Object(a.useRef)(null);return t=c,n=e.handleSelectTile,Object(a.useEffect)((function(){function e(e){t.current&&!t.current.contains(e.target)&&n(null)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),Object(g.jsx)("div",{ref:c,children:e.children})}var C=n(43);function I(e){var t=e.clientID,n=e.tiles,a=e.newTile,c=e.handleSelectTile,i=e.currentTurn,r=e.currentPlayer,s=e.gameState,l=e.discards,u=e.selectedTile,o=e.handleDiscard,j=e.pong,b=e.handlePong,O=e.chow,h=e.handleChow,f=e.multiChow,x=e.handleMultiChow,m=e.game,I=e.handleGame,T=s.findIndex((function(e){return e.playerID===t})),N={selected:{y:-15},unselected:{y:0}},P=n.map((function(e,t){var n="#343434";return e===a&&i&&(n="#ff4a4a"),Object(g.jsx)(C.a.div,{whileHover:{scale:1.1},variants:N,animate:u===e?"selected":"unselected",children:Object(g.jsx)(d.a,{fontSize:40,textShadow:"3px 4px ".concat(n),value:e,onClick:function(){return function(e){u===e&&i?o():c(e)}(e)},children:e.picture},t)})}));return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(d.h,{h:"95vh",w:"95vh",m:"auto",mt:"2vh",borderWidth:"1px",borderColor:"black",borderStyle:"solid",children:[Object(g.jsx)(w,{gameState:s,gameStateIndex:T,currentPlayer:r,playerIndex:2}),Object(g.jsx)(d.f,{}),Object(g.jsxs)(d.d,{w:"100%",children:[Object(g.jsx)(w,{gameState:s,gameStateIndex:T,currentPlayer:r,playerIndex:3}),Object(g.jsx)(d.f,{}),Object(g.jsx)(S,{discards:l}),Object(g.jsx)(d.f,{}),Object(g.jsx)(w,{gameState:s,gameStateIndex:T,currentPlayer:r,playerIndex:1})]}),Object(g.jsx)(d.f,{}),Object(g.jsxs)(d.d,{children:[Object(g.jsx)(v.a,{variant:"ghost",isDisabled:!j,onClick:b,children:" \u78b0 "}),Object(g.jsx)(v.a,{variant:"ghost",isDisabled:!O,onClick:f?x:h,children:" \u5403 "}),Object(g.jsx)(v.a,{variant:"ghost",isDisabled:!m,onClick:I,children:" \u80e1 "})]}),Object(g.jsx)(d.f,{}),s[T]&&Object(g.jsxs)(d.a,{position:"relative",zIndex:2,children:[Object(g.jsx)(d.a,{w:"100%",m:"auto",children:Object(g.jsx)(d.b,{mb:"5px",children:Object(g.jsx)(p,{tiles:s[T].revealedTiles.concat(s[T].bonusTiles)})})}),Object(g.jsx)(d.a,{w:"100%",m:"auto",children:Object(g.jsx)(d.b,{children:Object(g.jsx)(y,{handleSelectTile:c,children:Object(g.jsx)(d.d,{spacing:"0px",children:P})})})})]})]})})}var T=n(73);function N(e){var t=e.sequentialTiles,n=e.isOpen,a=e.onClose,c=e.handleChow,i=e.lastDiscard;return t?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(T.a,{isOpen:n,onClose:a,children:[Object(g.jsx)(T.g,{}),Object(g.jsxs)(T.d,{children:[Object(g.jsx)(T.f,{children:"Select a set"}),Object(g.jsx)(T.c,{}),Object(g.jsx)(T.b,{children:Object(g.jsx)(d.h,{spacing:3,children:t.map((function(e){return Object(g.jsx)(d.a,{onClick:function(){console.log("Selected chow set",e),c(e)},children:Object(g.jsx)(p,{tiles:e.concat(i).sort(h)})})}))})})]})]})}):null}function P(e){var t=e.winnerID,n=e.roundEnd,c=e.setRoundEnd,i=e.summary,r=e.handleNewGame,l=e.draw,u=Object(o.d)(),d=u.isOpen,j=u.onOpen,b=u.onClose,O=Object(a.useState)(!0),h=Object(s.a)(O,2),f=h[0],x=h[1];n&&!d&&(j(),setTimeout((function(){x(!1)}),3e3));return n&&!l?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(T.a,{isOpen:d,onClose:function(){c(!1),x(!0),b()},children:[Object(g.jsx)(T.g,{}),Object(g.jsxs)(T.d,{children:[Object(g.jsxs)(T.f,{children:[t," wins!"]}),Object(g.jsx)(T.c,{}),Object(g.jsxs)(T.b,{children:["Animal: ",i.animalPoints," ",Object(g.jsx)("p",{}),"Seat flower: ",i.windPoints," ",Object(g.jsx)("p",{}),"Dragon: ",i.dragonPoints," ",Object(g.jsx)("p",{}),"Prevailing wind: ",i.tableWindPoints," ",Object(g.jsx)("p",{}),"Seat wind: ",i.yourWindPoints," ",Object(g.jsx)("p",{}),"Mahjong Points: ",i.combinationPoints," ",Object(g.jsx)("p",{}),"Total Points: ",i.totalPoints," ",Object(g.jsx)("p",{})]}),Object(g.jsx)(T.e,{children:Object(g.jsx)(v.a,{isDisabled:f,onClick:r,children:"New game"})})]})]})}):null}var D=n(74);function E(e){var t=e.tableWind,n=e.yourWind,a=(e.currentPlayer,e.gameState),c=e.handleNewGame,i=e.roundEnd,r=a.map((function(e){return Object(g.jsxs)(d.c,{w:"100%",children:[e.username,Object(g.jsx)(d.f,{}),e.score]})}));return Object(g.jsxs)(D.e,{w:"200px",mr:"10px",align:"center",variant:"enclosed",isFitted:!0,children:[Object(g.jsxs)(D.b,{children:[Object(g.jsx)(D.a,{children:"Table"}),Object(g.jsx)(D.a,{children:"Scoring"})]}),Object(g.jsxs)(D.d,{children:[Object(g.jsx)(D.c,{children:Object(g.jsxs)(d.h,{spacing:"25px",children:[Object(g.jsxs)(d.a,{mt:"5px",children:[Object(g.jsxs)(d.c,{w:"190px",children:["Prevailing Wind ",Object(g.jsx)(d.f,{})," ",t]}),Object(g.jsxs)(d.c,{w:"190px",children:["Your Wind ",Object(g.jsx)(d.f,{})," ",n]})]}),Object(g.jsxs)(d.a,{children:[Object(g.jsx)(d.e,{fontSize:20,mb:"5px",children:"Leaderboard"}),Object(g.jsx)(d.a,{w:"190px",children:r})]}),Object(g.jsxs)(d.c,{w:"190px",children:[Object(g.jsx)(d.f,{}),Object(g.jsx)(v.a,{disabled:!i,onClick:c,variant:"outline",children:"New game"})]}),Object(g.jsx)(v.a,{onClick:c,variant:"outline",children:"New game (Debug)"})]})}),Object(g.jsx)(D.c,{})]})]})}function k(e){var t=e.draw,n=e.setDraw,c=e.roundEnd,i=e.setRoundEnd,r=e.handleNewGame,l=Object(o.d)(),u=l.isOpen,d=l.onOpen,j=l.onClose,b=Object(a.useState)(!0),O=Object(s.a)(b,2),h=O[0],f=O[1];c&&t&&!u&&(d(),setTimeout((function(){f(!1)}),3e3));return c?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(T.a,{isOpen:u,onClose:function(){n(!0),i(!1),f(!0),j()},children:[Object(g.jsx)(T.g,{}),Object(g.jsxs)(T.d,{children:[Object(g.jsx)(T.f,{children:"Nobody wins!"}),Object(g.jsx)(T.c,{}),Object(g.jsx)(T.b,{}),Object(g.jsx)(T.e,{children:Object(g.jsx)(v.a,{isDisabled:h,onClick:r,children:"New game"})})]})]})}):null}var W=n(48),R=n(72);function J(e){var t=e.sendMessage,n=Object(o.d)({defaultIsOpen:!0}),c=n.isOpen,i=(n.onOpen,n.onClose),r=Object(a.useState)(""),l=Object(s.a)(r,2),u=l[0],j=l[1],b=function(){i(),t("Username: "+u)};return Object(g.jsxs)(T.a,{isOpen:c,onClose:i,closeOnOverlayClick:!1,children:[Object(g.jsx)(T.g,{}),Object(g.jsxs)(T.d,{children:[Object(g.jsx)(T.f,{children:"Username"}),Object(g.jsxs)(W.a,{px:"20px",children:[Object(g.jsx)(R.a,{onKeyPress:function(e){"Enter"===e.key?b():console.log()},onChange:function(e){j(e.target.value)},value:u,placeholder:"Username"}),Object(g.jsxs)(d.c,{children:[Object(g.jsx)(d.f,{}),Object(g.jsx)(v.a,{my:"10px",onClick:b,type:"submit",children:"Submit"})]})]})]})]})}function G(){var e,t,n,c,i=Object(j.g)().gameId,b=Object(a.useState)("ws://irscybersec.tk:3000/".concat(i)),O=Object(s.a)(b,2),v=O[0],p=(O[1],Object(a.useState)([])),m=Object(s.a)(p,2),w=(m[0],m[1]),S=Object(a.useState)([]),y=Object(s.a)(S,2),C=y[0],T=y[1],D=Object(a.useState)([]),W=Object(s.a)(D,2),R=W[0],G=W[1],M=Object(a.useState)(),L=Object(s.a)(M,2),A=L[0],F=L[1],z=Object(a.useState)(),U=Object(s.a)(z,2),Y=U[0],q=U[1],B=Object(a.useState)(null),H=Object(s.a)(B,2),K=H[0],Q=H[1],V=Object(a.useState)([]),X=Object(s.a)(V,2),Z=X[0],$=X[1],_=Object(a.useState)(),ee=Object(s.a)(_,2),te=ee[0],ne=ee[1],ae=Object(a.useState)([]),ce=Object(s.a)(ae,2),ie=ce[0],re=ce[1],se=Object(a.useState)([]),le=Object(s.a)(se,2),ue=le[0],oe=le[1],de=Object(a.useState)(""),je=Object(s.a)(de,2),be=je[0],Oe=je[1],he=Object(a.useState)(""),fe=Object(s.a)(he,2),xe=fe[0],ve=fe[1],ge=Object(a.useState)([]),pe=Object(s.a)(ge,2),me=pe[0],we=pe[1],Se=Object(a.useState)(),ye=Object(s.a)(Se,2),Ce=ye[0],Ie=ye[1],Te=Object(a.useState)(!1),Ne=Object(s.a)(Te,2),Pe=Ne[0],De=Ne[1],Ee=Object(o.d)(),ke=Ee.isOpen,We=Ee.onOpen,Re=Ee.onClose,Je=Object(a.useState)(),Ge=Object(s.a)(Je,2),Me=Ge[0],Le=Ge[1],Ae=Object(a.useState)(!1),Fe=Object(s.a)(Ae,2),ze=Fe[0],Ue=Fe[1],Ye=Object(a.useState)(!1),qe=Object(s.a)(Ye,2),Be=qe[0],He=qe[1],Ke=Object(a.useState)(!1),Qe=Object(s.a)(Ke,2),Ve=Qe[0],Xe=Qe[1],Ze=Object(a.useState)(),$e=Object(s.a)(Ze,2),_e=$e[0],et=$e[1],tt=Object(a.useState)(!1),nt=Object(s.a)(tt,2),at=nt[0],ct=nt[1],it=Object(a.useState)(!1),rt=Object(s.a)(it,2),st=rt[0],lt=rt[1],ut=Object(a.useState)(!1),ot=Object(s.a)(ut,2),dt=ot[0],jt=ot[1],bt=Object(a.useState)([]),Ot=Object(s.a)(bt,2),ht=Ot[0],ft=Ot[1],xt=Object(a.useState)(null),vt=Object(s.a)(xt,2),gt=vt[0],pt=vt[1],mt=function(e){console.log("CHOW!"),console.log("Sequential: ",Me);var a=[];t=Z.filter((function(e){return e.suit===Ce.suit&&(e.value===Ce.value-1||e.value===Ce.value-2)})),n=Z.filter((function(e){return e.suit===Ce.suit&&(e.value===Ce.value-1||e.value===Ce.value+1)})),c=Z.filter((function(e){return e.suit===Ce.suit&&(e.value===Ce.value+1||e.value===Ce.value+2)})),1===Me.length?(a=Me[0].concat(Ce),console.log("Sequential Tiles:",t)):Me.length>1&&(a=e.concat(Ce),console.log("Sequential Tiles:",t),He(!1),Le(),Re()),yt(R+" chow "+JSON.stringify(a)),Ue(!1)},wt=function(){yt("New game!")},St=u()(v),yt=St.sendMessage,Ct=St.lastMessage,It=St.readyState,Tt=(e={},Object(r.a)(e,l.ReadyState.CONNECTING,"Connecting"),Object(r.a)(e,l.ReadyState.OPEN,"Connected"),Object(r.a)(e,l.ReadyState.CLOSING,"Closing"),Object(r.a)(e,l.ReadyState.CLOSED,"Closed"),Object(r.a)(e,l.ReadyState.UNINSTANTIATED,"Uninstantiated"),e)[It];return Object(a.useEffect)((function(){if(null!==Ct)if(console.log("Last message: ",Ct.data),w((function(e){return e.concat(Ct)})),Ct.data.includes("Online users:")){var e=Ct.data.replace("Online users: ","");T(e)}else if(Ct.data.includes("Game state")){var a=Ct.data.replace("Game state: ","");console.log("Game state: ",a),ft(JSON.parse(a))}else if(Ct.data.includes("Your ID")){var i=Ct.data.replace("Your ID: ","");G(i)}else if(Ct.data.includes("Tiles")){var r=JSON.parse(Ct.data.replace("Tiles: ",""));if(13===r.length?$(r.sort(h)):$((function(e){return e.concat(r).sort(h)})),ne(r),console.log("New tiles:",r),13!==r.length){console.log("Tiles:",Z);var l=x(Z,ue,ie,xe,be,[],r),u=Object(s.a)(l,2),o=u[0],d=u[1];Xe(o),et(d),console.log(d)}}else if(Ct.data.includes("Bonus")){var j=JSON.parse(Ct.data.replace("Bonus: ",""));re((function(e){return e.concat(j)}))}else if(Ct.data.includes("Table wind"))ve(Ct.data.replace("Table wind: ",""));else if(Ct.data.includes("Your wind"))Oe(Ct.data.replace("Your wind: ",""));else if(Ct.data.includes("It is your turn"))ct(!0);else if(Ct.data.includes("Discards")){var b=JSON.parse(Ct.data.replace("Discards: ",""));we(b),Ie(b.at(-1)),console.log("Last discarded",b.at(-1)),function(e){if(e){var a=x(Z,ue,ie,xe,be,e,[]),i=Object(s.a)(a,2),r=i[0],l=i[1];et(l),r&&(Xe(r),setTimeout((function(){Xe(!1)}),3e3));var u=Z.filter((function(t){return t.suit===e.suit&&t.value===e.value}));if(console.log("Same tiles: ",u),u.length>=2&&(De(!0),setTimeout((function(){De(!1)}),3e3)),ht.at(ht.findIndex((function(e){return e.playerID===R}))-1).playerID===K){t=Z.filter((function(t){return t.suit===e.suit&&(t.value===e.value-1||t.value===e.value-2)})),n=Z.filter((function(t){return t.suit===e.suit&&(t.value===e.value-1||t.value===e.value+1)})),c=Z.filter((function(t){return t.suit===e.suit&&(t.value===e.value+1||t.value===e.value+2)})),t=f(t),n=f(n),c=f(c);var o=[t,n,c].filter((function(e){return 2===e.length}));Le(o),o.length>1&&(He(!0),setTimeout((function(){He(!1)}),3e3)),2!=t.length&&2!=n.length&&2!=c.length||(Ue(!0),setTimeout((function(){Ue(!1)}),3e3))}}}(b.at(-1))}else if(Ct.data.includes("Previous player: "))Q(Ct.data.replace("Previous player: ",""));else if(Ct.data.includes("Revealed"))!function(){var e=JSON.parse(Ct.data.replace("Revealed: ","")),t=Z;console.log("New Tiles: ",t);for(var n=function(n){console.log("Target: ",e[n]),console.log("Target Index: ",t.indexOf(e[n])),t=t.filter((function(t){return!(t.suit===e[n].suit&&t.value===e[n].value)}))},a=0;a<e.length;a++)n(a);$(t),oe((function(t){return t.concat(e).sort(h)}))}();else if(Ct.data.includes("Current player: ")){var O=Ct.data.replace("Current player: ","");q(O.substring(1,O.length-1))}else if(Ct.data.includes("New game!"))jt(!1),we([]),Ie(),$([]),re([]),oe([]),pt(),et();else if(Ct.data.includes("wins")){jt(!0);var v=JSON.parse(Ct.data.split(" ")[2]);et(v),F(Ct.data.split(" ")[0])}else Ct.data.includes("Draw:")&&(lt(!0),jt(!0))}),[Ct,w]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(J,{sendMessage:yt}),Object(g.jsxs)(d.c,{children:[Object(g.jsx)(I,{clientID:R,tiles:Z,newTile:te,handleSelectTile:function(e){console.log(e),pt(e)},currentTurn:at,currentPlayer:Y,gameState:ht,discards:me,selectedTile:gt,handleDiscard:function(){Xe(!1),console.log("Discarding ",gt),yt("Discard: "+JSON.stringify(gt));var e=Z.filter((function(e){return!(e.suit===gt.suit&&e.value===gt.value&&e.id===gt.id)}));$(e),pt(null),ct(!1)},pong:Pe,handlePong:function(){var e=Z.filter((function(e){return e.suit===Ce.suit&&e.value===Ce.value})).concat(Ce);yt(R+" pong "+JSON.stringify(e)),De(!1)},chow:ze,handleChow:mt,multiChow:Be,handleMultiChow:function(){ke||(We(),console.log("Multi Chow detector: ",Me),yt(R+" multichow ")),He(!1)},game:Ve,handleGame:function(){yt(R+" WINS! "+JSON.stringify(_e)+" "+JSON.stringify(Z)),Xe(!1)}}),Object(g.jsx)(E,{tableWind:xe,yourWind:be,currentPlayer:Y,gameState:ht,handleNewGame:wt,roundEnd:dt})]}),Object(g.jsxs)(d.a,{children:[Object(g.jsx)(N,{sequentialTiles:Me,isOpen:ke,onClose:Re,handleChow:mt,lastDiscard:Ce}),Object(g.jsx)(P,{winnerID:A,roundEnd:dt,setRoundEnd:jt,summary:_e,handleNewGame:wt,draw:st}),Object(g.jsx)(k,{draw:st,setDraw:lt,roundEnd:dt,setRoundEnd:jt,handleNewGame:wt}),Object(g.jsxs)("p",{children:["Online Users: ",C," "]}),Object(g.jsxs)("p",{children:["Connection Status: ",Tt]})]})]})}function M(){var e=Object(j.f)();return Object(g.jsx)(d.b,{h:"100vh",w:"100vw",children:Object(g.jsxs)(d.a,{p:"10px",borderWidth:"2px",borderStyle:"solid",borderColor:"green",borderRadius:"10px",children:[Object(g.jsx)(d.g,{children:"Online Mahjong with your friends "}),Object(g.jsx)(v.a,{onClick:function(){e("/game/".concat(function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()}()))},w:"100%",variant:"outline",children:"Create game"})]})})}var L=n(49);function A(){return Object(g.jsx)(L.a,{children:Object(g.jsxs)(j.c,{children:[Object(g.jsx)(j.a,{path:"/",element:Object(g.jsx)(M,{})}),Object(g.jsx)(j.a,{path:"/game/:gameId",element:Object(g.jsx)(G,{})})]})})}var F=n(14);i.a.render(Object(g.jsx)(F.a,{children:Object(g.jsx)(A,{})}),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.c54c173c.chunk.js.map